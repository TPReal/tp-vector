(()=>{var jr=Object.create;var Ne=Object.defineProperty;var qr=Object.getOwnPropertyDescriptor;var zr=Object.getOwnPropertyNames;var Kr=Object.getPrototypeOf,_r=Object.prototype.hasOwnProperty;var Jr=(n,t,e)=>t in n?Ne(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Qr=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),j=(n,t)=>{for(var e in t)Ne(n,e,{get:t[e],enumerable:!0})},Zr=(n,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of zr(t))!_r.call(n,i)&&i!==e&&Ne(n,i,{get:()=>t[i],enumerable:!(r=qr(t,i))||r.enumerable});return n};var en=(n,t,e)=>(e=n!=null?jr(Kr(n)):{},Zr(t||!n||!n.__esModule?Ne(e,"default",{value:n,enumerable:!0}):e,n));var K=(n,t,e)=>(Jr(n,typeof t!="symbol"?t+"":t,e),e);var Ur=Qr((uc,Oi)=>{Oi.exports="data:image/png;base64,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"});var Je={};j(Je,{getSheet:()=>Si});var Ee={};j(Ee,{asset:()=>Oe,base64:()=>nn,binary:()=>rn,text:()=>tn,url:()=>it});async function Oe(n){return(await n).default}var tn=Oe,rn=Oe,nn=Oe,it=Oe;function st(n){return n==="X"?"Y":"X"}var we=class{constructor(t){this.color=t}static create(t){return new we(t)}get(t){return this.color}},De=we.create("black");var ie=class{constructor(t,e,r){this.pool=t;this.nextIndex=r;for(let[i,o]of e)this.setIdIndex(i,o)}usedIndices=new Set;colors=new Map;static create({pool:t,initial:e=[],nextIndex:r=0}){return new ie(t,e,r)}setIdIndex(t,e){let r=this.pool[e];return this.colors.set(t,r),this.usedIndices&&(this.usedIndices.add(e),this.usedIndices.size===this.pool.length&&(this.usedIndices=void 0)),r}incNextIndex(){let t=this.nextIndex;return this.nextIndex=(this.nextIndex+1)%this.pool.length,t}get(t){let e=this.colors.get(t);if(e!==void 0)return e;for(;this.usedIndices?.has(this.nextIndex);)this.incNextIndex();let r=this.incNextIndex();return this.setIdIndex(t,r)}};function Ft(n){return Array.isArray(n)&&n.length===2&&typeof n[0]=="number"&&typeof n[1]=="number"}function ee(n){return n.map(t=>t.join(",")).join(" ")}function V(n){return Array.isArray(n)?n.flat(2):[n]}function se(n){return V(n).filter(t=>t!==void 0)}function ot(n){return Array.isArray(n)?n.flatMap(t=>Ft(t)?[t]:t):[n]}function at(n,{maxDigits:t=6,maxRelativeError:e=1e-6}={}){for(let r=0;r<t;r++){let i=n.toFixed(r);if(Math.abs(n-Number(i))/n<=e)return i}return n.toFixed(t)}function te(n){if(!n)throw new Error(`Assertion failed, expected truthy, got ${n}`);return n}function Mt(n){if(typeof n!="number")throw new Error(`Assertion failed, expected number, got ${n}`);return n}function lt(n,t,{maxError:e=1e-9}={}){let r=n-t;return r>=-e&&r<=e}var Se=class{constructor(t){this.id=t;this.href=`#${this.id}`,this.url=`url(${this.href})`}href;url};function Vt(n,t="url"){return new Se(n)[t]}var fe=class extends Se{constructor(e,r){super(r);this.defs=e}static create(e,r){return new fe(e,r)}getDefs(){return this.defs.getDefs()}useByHref(){return this.useByAttribute("href","href")}useByAttribute(e,r){let i=Vt(this.id,r),o={};for(let s of V(e))o[s]=i;return re.create(this.defs,o)}},re=class{constructor(t,e){this.defs=t;this.attributes=e}static create(t,e){return new re(t,e)}getDefs(){return this.defs.getDefs()}asAttributes(){return this.attributes}};var Gt;(s=>{s.DEFAULT={pngAllowTransparency:!0,imageAutoSizeLogic:{measure:!0,widthAndHeight:"_not_set_"}};function t(){return{imageAutoSizeLogic:{measure:!1,widthAndHeight:"auto"}}}s.imageAutoSizeLogic=t;function e(){return{cornersMarkerType:"circles",quirks:{xlinkHref:!0}}}s.visicut=e;function r({runsHandles:a,colorCodedRunsPreset:l,colorCodedRuns:c=!!l}={}){return{pngAllowTransparency:"iffWhite",cornersMarkerType:"lines",laserRunsOptions:{...c?{colorCodes:()=>ie.create({pool:s.LIGHTBURN_RUNS_COLORS,initial:l===!0?s.DEFAULT_LIGHTBURN_COLOR_CODED_RUNS:l})}:void 0,handles:a},quirks:{lineTransformBrokenLightBurn:!0,roundedCornersRectangleLimitedLightBurn:!0}}}s.lightburn=r,s.DEFAULT_LIGHTBURN_COLOR_CODED_RUNS=[["print_back",5],["reversing_frame",10],["print",15],["cut",20],["corners_marker",29]],s.LIGHTBURN_RUNS_COLORS=["#000000","#0000ff","#ff0000","#00e000","#d0d000","#ff8000","#00e0e0","#ff00ff","#b4b4b4","#0000a0","#a00000","#00a000","#a0a000","#c08000","#00a0ff","#a000a0","#808080","#7d87b9","#bb7784","#4a6fe3","#d33f6a","#8cd78c","#f0b98d","#f6c4e1","#fa9ed4","#500a78","#b45a00","#004754","#86fa88","#ffdb66"]})(Gt||={});var sn=Gt.DEFAULT;function on(){return sn}function Y(){return on()}function Nt(n){let{pos:t,min:e,max:r,len:i}=n,o={inferred:n,error:"Incompatible dimensions"};function s({min:a,max:l,len:c,forced:m=!1}){let u=t;if(!lt(c,l-a)||u==="default"&&a)return o;let g=lt(l,-a);if(u==="center"&&!g)return o;u||(a?g&&(u="center"):u="default");let f;return c<0&&(f="Negative dimension length"),{inferred:m?n:{pos:u,min:a,max:l,len:c},forceInferred:{min:a,len:c},error:f}}return s(e!==void 0?r!==void 0?i!==void 0?{min:e,max:r,len:i}:{min:e,max:r,len:r-e}:i!==void 0?{min:e,max:e+i,len:i}:t==="default"?{min:e,max:0,len:0}:t==="center"?{min:e,max:-e,len:-2*e}:{min:e,max:0,len:-e,forced:!0}:r!==void 0?i!==void 0?{min:r-i,max:r,len:i}:t==="default"?{min:0,max:r,len:r}:t==="center"?{min:-r,max:r,len:2*r}:{min:0,max:r,len:r,forced:!0}:i!==void 0?t==="default"?{min:0,max:i,len:i}:t==="center"?{min:-i/2,max:i/2,len:i}:{min:0,max:i,len:i,forced:!0}:!t||t==="default"?{min:0,max:1,len:1,forced:!0}:{min:-.5,max:.5,len:1,forced:!0})}function Ut(n){return Nt(n).inferred}function ct(n){let{forceInferred:t,error:e}=Nt(n||{});if(!t)throw new Error(`Error in partial dimension spec: ${e||"(unknown)"} (input: ${JSON.stringify(n)})`);return t}function N(n){let{x:t,y:e,margin:r}=Xt(n),{min:i,len:o}=ct(t),{min:s,len:a}=ct(e);return _({minX:i,minY:s,width:o,height:a},r)}function Yt(n){let{x:t,y:e,margin:r}=Xt(n),{left:i,right:o,top:s,bottom:a}=oe(r);function l(c,m,u){let{min:g,len:f}=ct(c);return{min:g-m,len:f+m+u}}return{x:l(t,i,o),y:l(e,s,a)}}function Xt(n={}){let{centered:t,centeredX:e=t,centeredY:r=t,side:i,minX:o,maxX:s,width:a=i,minY:l,maxY:c,height:m=i,x:u={pos:e?"center":void 0,min:o,max:s,len:a},y:g={pos:r?"center":void 0,min:l,max:c,len:m},margin:f}=n;return{x:u,y:g,margin:f}}function oe(n={},t=0){return(({value:e=t,x:r=e,y:i=e,left:o=r,right:s=r,top:a=i,bottom:l=i})=>({left:o,right:s,top:a,bottom:l}))(typeof n=="number"?{value:n}:n)}function ut(n){let{x:t,y:e,width:r,height:i}=n.getBBox();return{minX:t,minY:e,width:r,height:i}}function Ht({left:n,right:t,top:e,bottom:r},i){let{left:o,right:s,top:a,bottom:l}=oe(i,1);return{left:n*o,right:t*s,top:e*a,bottom:r*l}}function _({minX:n,minY:t,width:e,height:r},i){let{left:o,right:s,top:a,bottom:l}=oe(i);return{minX:n-o,width:e+o+s,minY:t-a,height:r+a+l}}function ln({boundingBox:n,viewBox:t}){return{left:n.minX-t.minX,right:t.minX+t.width-(n.minX+n.width),top:n.minY-t.minY,bottom:t.minY+t.height-(n.minY+n.height)}}var cn=1e-9,un=["left","right","top","bottom"];function pn({boundingBox:n,viewBox:t,minMargin:e=0}){let r=Math.max(t.width,t.height)*cn,i=oe(e),o=ln({boundingBox:n,viewBox:t});return un.map(s=>{let a=i[s],l=o[s];return{side:s,min:a,actual:l,fits:l>=a-r}})}function $t(n){return pn(n).every(({fits:t})=>t)}function ge({minX:n,minY:t,width:e,height:r}){return[n,t,e,r].join(" ")}var qt="http://www.w3.org/2000/svg",mn=new Map([["xlink","http://www.w3.org/1999/xlink"],["xml","http://www.w3.org/XML/1998/namespace"]]),dn=["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","panose-1","paint-order","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","transform-origin","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","x-height"],zt=new Map;function fn(n){return n.split("-").map((t,e)=>e?t[0].toUpperCase()+t.slice(1):t).join("")}for(let n of dn)zt.set(fn(n),n);var gn={vectorEffect:"inherit"};function X(n,t){for(let[e,r]of Object.entries(t)){let i=zt.get(e)||e;if(!/^xmlns(:\w+)?$/.test(i)){let s=i.indexOf(":"),a=s>0&&mn.get(i.slice(0,s))||null;r===void 0?n.removeAttributeNS(a,i):n.setAttributeNS(a,i,String(r))}else r===void 0?n.removeAttribute(i):n.setAttribute(i,String(r));Y().quirks?.xlinkHref&&i==="href"&&X(n,{"xlink:href":r})}}function D({tagName:n,attributes:t={},children:e=[]}){let r=document.createElementNS(qt,n);X(r,gn),X(r,t);for(let i of se(e))r.appendChild(typeof i=="string"?document.createTextNode(i):i);return r}var hn={xmlns:qt,"xmlns:xlink":"http://www.w3.org/1999/xlink"};function Ue({viewBox:n,millimetersPerUnit:t,attributes:e={},children:r=[]}){return D({tagName:"svg",attributes:{...n&&t&&{width:`${n.width*t}mm`,height:`${n.height*t}mm`},...hn,viewBox:n&&ge(n),...e},children:r})}function he(n){return n.cloneNode(!0)}function Kt(n){function t(i){return JSON.stringify([i.tagName,i.id,i.getAttributeNames()])}let e=new Map;for(let i of new Set(n)){let o=t(i),s=e.get(o)||[];e.set(o,s),s.push(i)}let r=[];for(let i of e.values())if(i.length===1)r.push(i[0]);else{let o=new Set;for(let s of i){let{outerHTML:a}=s;o.has(a)||(o.add(a),r.push(s))}}return r}var pt={maxMeasures:3,minSizeCoeff:.1},Wt=N({centered:!0,width:10,height:10}),jt;function Ye(n){let t=Wt,e=jt;if(e){for(;e.firstChild;)e.lastChild?.remove();for(let r of n)e.appendChild(r)}else e=Ue({viewBox:t,children:n}),jt=e;document.body.appendChild(e);try{let r=ut(e),i=1;for(;i<pt.maxMeasures&&(r.width<pt.minSizeCoeff*t.width||r.height<pt.minSizeCoeff*t.height||!$t({boundingBox:r,viewBox:t}));)t=_(r,{x:r.width/2,y:r.height/2}),X(e,{viewBox:ge(t)}),r=ut(e),i++;return Wt=t,r}finally{e.remove()}}var as=Ue({viewBox:N()});var R={};j(R,{circle:()=>He,ellipse:()=>Rn,line:()=>$e,polyLine:()=>kn,polygon:()=>vn,rectangle:()=>ve});var H=void 0;function _t(n){return n===void 0?"":`@${JSON.stringify(n)}`}var mt=new Set;function Jt(n){if(mt.has(n))throw new Error(`Id already registered: ${n}`);return mt.add(n),n}function ae(n="id"){let t=1,e;do e=`__${n}_${t++}`;while(mt.has(e));return Jt(e)}function dt(n="default"){return n==="default"?er:n==="center"?tr:n}function Qt(n="default"){return{...er,...dt(n)}}function Zt(n="default"){return n==="default"?bn:n==="center"?tr:n}var er={x:"rightOfOrigin",y:"belowOrigin"},bn={x:"left",y:"top"},tr={x:"center",y:"center"};function ue(n){switch(n){case"rightOfOrigin":case"belowOrigin":case"left":case"top":return 0;case"center":return .5;case"leftOfOrigin":case"aboveOrigin":case"right":case"bottom":return 1;default:throw new Error(`Unexpected argument: ${n}`)}}var ft=class{translate(t,e=0){return this.tfData("translate",[t,e])}translateX(t){return this.translate(t)}translateY(t){return this.translate(0,t)}moveUp(t){return this.translateY(-t)}moveDown(t){return this.translateY(t)}moveRight(t){return this.translateX(t)}moveLeft(t){return this.translateX(-t)}scale(...t){let[e,r,i]=typeof t[1]=="number"?t:[t[0],t[0],t[1]];if(i){let[o,s]=i;return this.translate(-o,-s).scale(e,r).translate(o,s)}return this.tfData("scale",[e,r])}scaleX(t,e){return this.scale(t,1,e?[e,0]:void 0)}scaleY(t,e){return this.scale(1,t,e?[0,e]:void 0)}flipX(t){return this.scaleX(-1,t)}flipY(t){return this.scaleY(-1,t)}flipXY(t){return this.scale(-1,t)}swapXY(){return this.rotateRight().flipX()}rotate(t,e){return this.tfData("rotate",[t,...e||[]])}rotateRight(...t){let[e,r]=typeof t[0]=="number"?t:[90,t[0]];return this.rotate(e,r)}rotateLeft(...t){let[e,r]=typeof t[0]=="number"?t:[90,t[0]];return this.rotate(-e,r)}skewX(t,e=0){return e?this.translateY(-e).skewX(t).translateY(e):this.tfData("skewX",[t])}skewTopToRight(t,e=0){return this.skewX(-t,e)}skewTopToLeft(t,e=0){return this.skewX(t,e)}skewBottomToRight(t,e=0){return this.skewX(t,e)}skewBottomToLeft(t,e=0){return this.skewX(-t,e)}skewY(t,e=0){return e?this.translateX(-e).skewY(t).translateX(e):this.tfData("skewY",[t])}skewRightUp(t,e=0){return this.skewY(-t,e)}skewRightDown(t,e=0){return this.skewY(t,e)}skewLeftUp(t,e=0){return this.skewY(t,e)}skewLeftDown(t,e=0){return this.skewY(-t,e)}matrix(t){return this.tfData("matrix",t)}};function xn(n,t){let e=`${n}(${t.join(",")})`;return t.some(r=>!Number.isFinite(+r))&&console.warn(`Infinite values in transform: ${e}`),e}var Te=class extends ft{tfData(t,e){return this.transform(be.fromSVGTransform(xn(t,e)))}};var Le=class extends Te{constructor(e){super();this.svgTransform=e}static fromSVGTransform(e){return new Le(e)}transform(e){return new Le([e.svgTransform,this.svgTransform].filter(Boolean).join(" "))}asAttributes(){return{transform:this.svgTransform||void 0}}toString(){return`transform="${this.svgTransform}"`}},be=Le;K(be,"IDENTITY",new Le(""));var q=be.IDENTITY;function gt(n,t){return t.svgTransform?`${t.svgTransform}*${n}`:`${n}`}function An(n){return Object.hasOwn(n,"hold")}function yn(n){return Object.hasOwn(n,"scale")}function Pn(n){return Object.hasOwn(n,"target")}function ir(n,t){let e,r,i;if(typeof t=="string"){let f=dt(t);e=f.x||"unchanged",r=f.y||"unchanged",i="fit"}else if(Pn(t)){let{x:f,y:p}=Yt(t.target),d=Zt(t.align);e=f&&{...f,align:d.x},r=p&&{...p,align:d.y},i=t.fitting||"fit"}else{if(t.align)throw new Error("Unexpected align parameter for {x, y} parameters type");e=t.x||"unchanged",r=t.y||"unchanged",i=t.fitting||"fit"}let o=[rr("X",{min:n.minX,len:n.width},e),rr("Y",{min:n.minY,len:n.height},r)];if(i!=="stretch"){let f=o.map(({scale:p})=>p).filter(p=>p!==void 0);if(f.length){let p=i==="fit"?Math.min(...f):Math.max(...f);for(let d of o)d.negotiateScale&&(d.scale=p)}}let[{from:s,to:a,scale:l=1},{from:c,to:m,scale:u=1}]=o,g=q;return(s||c)&&(g=g.translate(-s,-c)),(l!==1||u!==1)&&(g=g.scale(l,u)),(a||m)&&(g=g.translate(a,m)),g}function rr(n,t,e){if(!t.len)return{from:0,to:0,negotiateScale:!1};if(e==="unchanged")return{from:0,to:0,scale:1,negotiateScale:!1};if(typeof e=="string")return{from:t.min+ue(e)*t.len,to:0,negotiateScale:!0};if(An(e)){let c=t.min+ue(e.hold)*t.len,m=yn(e)?e.scale:e.len!==void 0?e.len/t.len:void 0;return{from:c,to:c,...m!==void 0&&{scale:m},negotiateScale:!0}}let{min:r,max:i,len:o}=Ut(e),s=e.align||e.pos==="center"&&"center",a;if(s)a=ue(s);else if(r!==void 0)a=0;else if(i!==void 0)a=1;else throw new Error;let l={...o!==void 0&&{scale:o/t.len},negotiateScale:!0};if(a===0){if(r===void 0)throw new Error(`Error for the ${n} axis: Expected known min for align ${s}`);return{from:t.min,to:r,...l}}if(a===1){if(i===void 0)throw new Error(`Error for the ${n} axis: Expected known max for align ${s}`);return{from:t.min+t.len,to:i,...l}}if(a===.5){if(r===void 0||i===void 0)throw new Error(`Error for the ${n} axis: Expected a definite range for align ${s}`);return{from:t.min+t.len/2,to:(r+i)/2,...l}}return a}function sr(n,t){return!!n&&t.every(e=>typeof n[e]=="function")}function wn(n){return sr(n,["getDefs"])}function ht(n){return sr(n,["getElements","setLayer","selectLayers"])}var Re=class{constructor(t,e){this.element=t;this.layer=e}static create(t,e=H){return new Re(t,e)}getElements(){return[he(this.element)]}setLayer(t){return Re.create(this.element,t)}getLayers(){return new Set([this.layer])}selectLayers(...t){return V(t).includes(this.layer)?this:T.EMPTY}},Be=class{constructor(t){this.defs=t}static create(t){return new Be(t)}getElements(){return[]}getDefs(){return this.defs.getDefs()}setLayer(){return this}getLayers(){return new Set}selectLayers(){return this}};function or(n){return se(n).map(t=>t instanceof SVGElement?Re.create(t):ht(t)?t:Be.create(t))}var L=class extends Te{constructor(e,r,i,o,s,a){super();this.parts=e;this.tf=r;this.layer=i;this.defs=o;this.attributes=s;this.boundingBoxPiece=a}boundingBox;static create(...e){return new L(or(e),q,H,[],{},void 0)}static createElement({tagName:e,attributes:r={},children:i=[]}){let o=[],s=[];for(let a of V(i))ht(a)?(o.push(...a.getElements()),a.getDefs&&s.push(...a.getDefs())):wn(a)?s.push(...a.getDefs()):o.push(a);return L.create(D({tagName:e,attributes:r,children:o})).addDefs(s)}static createDefs(...e){return L.EMPTY.addDefs(...e)}add(...e){let r=se(e);return r.length?L.create(this,r):this}addDefs(...e){let r=se(e);if(!r.length)return this;let i=L.create(r);return new L(this.parts,this.tf,this.layer,[...this.defs,...i.getDefs(),...i.getElements()],this.attributes,this.boundingBoxPiece)}setAttributes(e){return Object.keys(e).length?new L(this.parts,this.tf,this.layer,this.defs,{...this.attributes,...e},this.boundingBoxPiece):this}transform(e){return new L(this.parts,this.tf.transform(e),this.layer,this.defs,this.attributes,this.boundingBoxPiece)}andThen(e,...r){return e(this,...r)}asDefs(){return L.createDefs(this)}asDefTool(e=ae()){return fe.create(this.setAttributes({id:e}).asDefs(),e)}useDefTool(...e){let r;if(e.length===1)[r]=e;else{let[i,o,s]=e;r=i.useByAttribute(o,s)}return this.setAttributes(r.asAttributes()).addDefs(r)}setLayer(e){return new L(this.parts,this.tf,e,this.defs,this.attributes,this.boundingBoxPiece)}getLayers(){if(this.layer===H){let e=new Set;for(let r of this.parts)for(let i of r.getLayers())e.add(i);return e}return new Set([this.layer])}selectLayers(...e){return this.layer===H?new L(this.parts.map(r=>r.selectLayers(...e)),this.tf,H,[],this.attributes,this.boundingBoxPiece):V(e).includes(this.layer)?this:L.EMPTY}getElements(){return this.withTransformAndAttributes(this.parts.flatMap(e=>e.getElements()))}getBoundingBoxElements(){return this.withTransformAndAttributes(this.boundingBoxPiece?this.boundingBoxPiece.getBoundingBoxElements():this.parts.flatMap(e=>e.getBoundingBoxElements?.()||e.getElements()))}withTransformAndAttributes(e){if(!e.length)return[];let r={...this.attributes,...this.tf.asAttributes()};if(Object.values(r).every(i=>i===void 0))return e;if(e.length===1){let[i]=e,o=new Set(i.getAttributeNames());if(Object.keys(r).every(s=>!o.has(s))){let s=he(i);return X(s,r),[s]}}return[D({tagName:"g",attributes:r,children:e})]}getDefs(){return[...this.defs,...this.parts.flatMap(e=>e.getDefs?e.getDefs():[])]}getDefsElement(){let e=this.getDefs();if(e.length)return D({tagName:"defs",children:Kt(e).map(he)})}asG(e){let r=this.getElements();return!e&&r.length===1&&r[0]instanceof SVGGElement?r[0]:D({tagName:"g",attributes:e,children:r})}wrapInG(e={}){return L.create(this.asG(e)).addDefs(this.getDefs())}getBoundingBox(e){if(!this.boundingBox){let r=this.getDefsElement();this.boundingBox=Ye([...r?[r]:[],...this.getBoundingBoxElements()])}return _(this.boundingBox,e)}setBoundingBox(e){return this.tf.svgTransform?L.create(this).setBoundingBox(e):new L(this.parts,this.tf,this.layer,this.defs,this.attributes,L.create(e instanceof SVGElement||ht(e)?e:Sn(e)))}extendBoundingBox(e){return this.setBoundingBox(_(this.getBoundingBox(),e))}mirrorX(e){return b(this,this.flipX(e))}mirrorY(e){return b(this,this.flipY(e))}mirrorXY(e){return this.mirrorX(e?.[0]).mirrorY(e?.[1])}normalise(e,{margin:r}={}){return this.transform(ir(this.getBoundingBox(r),e))}center(){return this.normalise("center")}centerIn(e,r){return this.normalise({target:e,align:"center"},r)}centerAndFitTo1By1(e){return this.centerIn({centered:!0},e)}pad(e,r){return this.normalise({target:_(this.getBoundingBox(),Ht(oe(e),-1)),align:r})}toString(){return gt(`[${this.parts.join(", ")}]`+_t(this.layer),this.tf)}},T=L;K(T,"EMPTY",L.create());var xe=class extends T{constructor(...t){super(or(t),q,H,[],{},void 0)}};function b(...n){return T.create(...n)}function Sn(n){let{minX:t,minY:e,width:r,height:i}=N(n);return D({tagName:"rect",attributes:{x:t,y:e,width:r,height:i}})}var Ce=class{constructor(t){this.getPiece=t}static create(t){return new Ce(t)}getWrapped(){return T.create(typeof this.getPiece=="function"?this.getPiece():this.getPiece)}getElements(){return this.getWrapped().getElements()}getDefs(){return this.getWrapped().getDefs()}setLayer(t){return this.getWrapped().setLayer(t)}getLayers(){return this.getWrapped().getLayers()}selectLayers(...t){return this.getWrapped().selectLayers(...t)}},Xe=class extends T{constructor(t){super([Ce.create(t)],q,H,[],{},void 0)}};function bt(){class n extends Xe{static create(...e){return this.createInternal(...e)}static createInternal(...e){throw new Error(`Implement static createInternal in ${this.name}`)}}return n}function Tn({radiusX:n,radiusY:t=n,xAxisRotationDeg:e=0,largeArc:r=!1,clockwise:i,target:o}){return{radiusX:n,radiusY:t,xAxisRotationDeg:e,largeArc:r,clockwise:i,target:o}}var $=class extends bt(){constructor(e){super(()=>this.getElement());this.commands=e}static createInternal(e=[0,0]){return new $([]).moveTo(e)}static fromD(...e){return new $(V(e))}getElement(){return D({tagName:"path",attributes:{d:this.asPathD()}})}append(e,r=$){let i=e.map(({command:o,args:s,relative:a=!1})=>{let l=a?o.toLowerCase():o;return s?`${l} ${s}`:l});return new r([...this.commands,...i])}moveTo(e,{relative:r=!1}={}){return this.append([{command:"M",args:ee([e]),relative:r}])}relativeMoveTo(e){return this.moveTo(e,{relative:!0})}appendLineTo(e,r=!1){return this.append(e.map(i=>({command:"L",args:ee([i]),relative:r})))}lineTo(...e){return this.appendLineTo(e)}relativeLineTo(...e){return this.appendLineTo(e,!0)}horizontal(e,{relative:r=!1}={}){return this.append([{command:"H",args:String(e),relative:r}])}relativeHorizontal(e){return this.horizontal(e,{relative:!0})}vertical(e,{relative:r=!1}={}){return this.append([{command:"V",args:String(e),relative:r}])}relativeVertical(e){return this.vertical(e,{relative:!0})}closePath(){return this.append([{command:"Z"}])}appendQuadratic({args:e,relative:r=!1}){return this.append(e.map(({point1:i,target:o})=>i?{command:"Q",args:ee([i,o]),relative:r}:{command:"T",args:ee([o]),relative:r}),xt)}quadratic(e,...r){return this.appendQuadratic({args:[e,...r]})}relativeQuadratic(e,...r){return this.appendQuadratic({args:[e,...r],relative:!0})}appendCubic({args:e,relative:r=!1}){return this.append(e.map(({point1:i,point2:o,target:s})=>i?{command:"C",args:ee([i,o,s]),relative:r}:{command:"S",args:ee([o,s]),relative:r}),At)}cubic(e,...r){return this.appendCubic({args:[e,...r]})}relativeCubic(e,...r){return this.appendCubic({args:[e,...r],relative:!0})}appendArc({args:e,relative:r=!1}){return this.append(e.map(i=>{let{radiusX:o,radiusY:s,xAxisRotationDeg:a,largeArc:l,clockwise:c,target:m}=Tn(i);return{command:"A",args:`${o},${s} ${a} ${Number(l)} ${Number(c)} `+ee([m]),relative:r}}))}arc(...e){return this.appendArc({args:e})}relativeArc(...e){return this.appendArc({args:e,relative:!0})}asPathD(){return this.commands.join(" ")}toString(){return`Path[${this.asPathD()}]`}},xt=class extends ${quadratic(...t){return this.appendQuadratic({args:t})}relativeQuadratic(...t){return this.appendQuadratic({args:t,relative:!0})}},At=class extends ${cubic(...t){return this.appendCubic({args:t})}relativeCubic(...t){return this.appendCubic({args:t,relative:!0})}};function He({center:n=[0,0],radius:t=1}={}){return T.createElement({tagName:"circle",attributes:{cx:n[0],cy:n[1],r:t}})}function Rn({center:n=[0,0],radiusX:t=1,radiusY:e=1}={}){return T.createElement({tagName:"ellipse",attributes:{cx:n[0],cy:n[1],rx:t,ry:e}})}function ve({cornerRadius:n=0,cornerRadiusX:t=n,cornerRadiusY:e=n,...r}={}){let{minX:i,minY:o,width:s,height:a}=N(r);if(Y().quirks?.roundedCornersRectangleLimitedLightBurn&&(t!==e||2*t>s||2*e>a)){let l=Math.min(t,s/2),c=Math.min(e,a/2),m=s-2*l,u=a-2*c,g={radiusX:l,radiusY:c,clockwise:!0};return $.create([i,o+c]).relativeArc({...g,target:[l,-c]}).relativeHorizontal(m).relativeArc({...g,target:[l,c]}).relativeVertical(u).relativeArc({...g,target:[-l,c]}).relativeHorizontal(-m).relativeArc({...g,target:[-l,-c]}).closePath()}return T.createElement({tagName:"rect",attributes:{x:i,y:o,width:s,height:a,...t?{rx:t}:{},...e?{ry:e}:{}}})}function $e(...n){let[t,e]=n.length==1?[[0,0],n[0]]:n,r=T.createElement({tagName:"line",attributes:{x1:t[0],y1:t[1],x2:e[0],y2:e[1]}});return Y().quirks?.lineTransformBrokenLightBurn?r.wrapInG():r}function vn(...n){return T.createElement({tagName:"polygon",attributes:{points:ee(ot(n))}})}function kn(...n){return T.createElement({tagName:"polyline",attributes:{points:ee(ot(n))}})}function ar(n,t,{fill:e=!0,stroke:r}={}){let i={};return e===!1?i.fill="none":e===!0&&(i.fill=t),r&&(i.stroke=t,typeof r=="number"&&(i.strokeWidth=r)),n.setAttributes(i)}var On=1e6;function lr(n){return ve({centered:!0,side:n})}var J=class{constructor(t,e,r){this.mask=t;this.attributes=e;this.id=r;this.genId=r}genId;static everything(t){return t?J.incl(lr(t)):J.EVERYTHING}static incl(t,e){return J.NOTHING.incl(t,e)}static excl(t,{everythingSide:e,...r}={}){return J.everything(e).excl(t,r)}static create(t,{attributes:e,id:r}={}){return new J(t,e,r)}add(t){return new J(this.mask.add(t),this.attributes,void 0)}incl(t,e){return this.add(ar(t,"white",e))}excl(t,e){return this.add(ar(t,"black",e))}setAttributes(t){return new J(this.mask,{...this.attributes,...t},void 0)}setId(t){return new J(this.mask,this.attributes,t)}getDefs(){return[D({tagName:"mask",attributes:{id:this.getId()},children:this.mask.getElements()})]}asAttributes(){return{mask:new Se(this.getId()).url}}getId(){return this.genId||(this.genId=ae("mask")),this.genId}},Ie=J;K(Ie,"NOTHING",new J(T.EMPTY,{},"mask_nothing")),K(Ie,"EVERYTHING",J.incl(lr(On)).setId("mask_everything"));var En=11;function Dn(n){if(Array.isArray(n))return function(l){return l.length!==2||Object.hasOwn(l[0],"offset")}(n)?n:[0,1].map(l=>({offset:l,...n[l]}));let{startOffset:t=0,endOffset:e=1,numStops:r=En,offsetStep:i=(e-t)/(r-1),func:o}=typeof n=="function"?{func:n}:n;if(i<=0)throw new Error(`Expected positive offset step, got ${i}`);let s=[];for(let a=t;a<=e+1e-9;a+=i){let l=o(a);l&&s.push({offset:a,...l})}return s}var cr=[void 0,void 0];function Ln({offset:n,color:t,opacity:e}){return T.createElement({tagName:"stop",attributes:{offset:n,stopColor:t,stopOpacity:e}})}function yt({stops:n,spread:t,from:e=cr,to:r=cr,transform:i,attributes:o,id:s}){return T.createElement({tagName:"linearGradient",children:Dn(n).map(Ln),attributes:{spreadMethod:t,x1:e[0],y1:e[1],x2:r[0],y2:r[1],gradientTransform:i?.svgTransform,...o}}).asDefTool(s)}function We(n){return new Promise((t,e)=>{n.addEventListener("load",t,!1),n.addEventListener("error",r=>{console.error('Waiting for the "load" event, got "error"',n,r),e(r)},!1)})}function je({mimeType:n,binData:t}){return Bn({mimeType:n,text:t})}function Bn({mimeType:n,text:t}){return Fe({mimeType:n,base64Data:btoa(t)})}function Fe({mimeType:n,base64Data:t}){return`data:${n};base64,${t}`}async function ke(n){let t=new FileReader,e=We(t);return t.readAsDataURL(n),await e,t.result}function Cn(n){return n.startsWith("data:")}async function ur(n){if(Cn(n))return n;let t;try{t=await(await fetch(n)).blob()}catch(e){throw new Error(`Failed to fetch: ${n}
${e}`,{cause:e})}return await ke(t)}var In="application/octet-stream",Fn={woff:"font/woff",woff2:"font/woff2",otf:"font/otf",ttf:"font/ttf",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif"};function qe(n){return Fn[n]||In}var mr="woff2";function dr(n){return qe(n)}var fr={thin:100,regular:400,bold:700};function Mn(n){return typeof n=="string"?fr[n]:n}function gr(n){if(n?.weight!==void 0)return Mn(n.weight);if(n?.bold!==void 0)return fr[n.bold?"bold":"regular"]}function ze({italic:n,bold:t,weight:e,attributes:r}){let i={...r};return n!==void 0&&(i.fontStyle=n?"italic":"normal"),i.fontWeight=gr({bold:t,weight:e}),i}var B=class extends re{constructor(e,r,i){super(i,{fontFamily:e,...r&&ze(r)});this.name=e}static async fromBinary({name:e,type:r=mr,binData:i,fontAttributes:o}){return await B.fromURL({name:e,url:je({mimeType:dr(r),binData:i}),fontAttributes:o})}static async fromBase64({name:e,type:r=mr,base64Data:i,fontAttributes:o}){return await B.fromURL({name:e,url:Fe({mimeType:dr(r),base64Data:i}),fontAttributes:o})}static async fromBlob({name:e,blob:r,fontAttributes:i}){return await B.fromURL({name:e,url:await ke(r),fontAttributes:i})}static async fromURL({name:e,url:r,fontAttributes:i}){return await B.fromStyle({name:e,styleContent:`@font-face {
  font-family: ${JSON.stringify(e)};
  src: url(${JSON.stringify(r)});
}`,fontAttributes:i})}static async fromAsset({name:e,urlAsset:r,fontAttributes:i}){return await B.fromURL({name:e,url:await it(r),fontAttributes:i})}static async fromStyle({name:e,styleContent:r,fontAttributes:i}){return new B(e,i,T.createDefs(await Gn(r)))}static system(e,r){return new B(e,r,T.EMPTY)}static async googleFonts(e,r){let i=[],o=[];r?.italic&&(i.push("ital"),o.push(1));let s=gr(r);return s!==void 0&&(i.push("wght"),o.push(s)),await B.fromStyle({name:e,styleContent:`@import url(${JSON.stringify(`https://fonts.googleapis.com/css2?family=${encodeURIComponent(e)}`+(i.length?`:${i.join(",")}@${o.join(",")}`:""))});`,fontAttributes:r})}setFontAttributes(e){return new B(this.name,{...this.setFontAttributes,...e},this.defs)}},Vn=/(?<import>@import\s+)?\burl\((?<q>['"]?)(?<url>.+?)\k<q>\)(?<semi>;)?/g;async function hr(n){let t=[...n.matchAll(Vn)].map(async i=>{let{url:o}=te(i.groups),s;try{s=await(await fetch(o)).blob()}catch(l){throw new Error(`Failed to fetch: ${o}
${l}`,{cause:l})}if(s.type==="text/css"&&i.groups?.import)return{mat:i,text:await hr(await s.text())+`
`};let a=await ke(s);return{mat:i,text:`url(${JSON.stringify(a)})${i.groups?.semi??""}`}}),e=[],r=0;for(let{mat:i,text:o}of await Promise.all(t))e.push(n.slice(r,i.index)),e.push(o),r=Mt(i.index)+i[0].length;return e.push(n.slice(r)),e.join("")}async function Gn(n){return D({tagName:"style",children:await hr(n)})}var br="png";function Nn(n="auto"){if(n==="auto")return"auto";let{width:t=1,height:e=1,align:r,fitting:i="fit"}=n;return{width:t,height:e,align:Qt(r),fitting:i}}function xr(n){return qe(n)}var I=class extends xe{constructor(e,r){super(e);this.image=e;this.scaling=r}static async fromBinary({type:e=br,binData:r,scaling:i}){return await I.fromURL({url:je({mimeType:xr(e),binData:r}),scaling:i})}static async fromBase64({type:e=br,base64Data:r,scaling:i}){return await I.fromURL({url:Fe({mimeType:xr(e),base64Data:r}),scaling:i})}static async fromBlob(e){return await I.fromURL(await ke(e))}static async fromURL(e){let{url:r,scaling:i=void 0}=typeof e=="string"?{url:e}:e,o=D({tagName:"image"}),s=We(o);return X(o,{href:await ur(r)}),await s,I.fromImage({image:o,canModifyImage:!0,scaling:i})}static async fromAsset(e){let{urlAsset:r,scaling:i=void 0}=e instanceof Promise?{urlAsset:e}:e;return await I.fromURL({url:await Ee.url(r),scaling:i})}static fromImage(e){let{image:r,canModifyImage:i=!1,scaling:o=void 0}=e instanceof SVGImageElement?{image:e}:e,s=i?r:he(r),a=Nn(o);return Un(s,a),new I(s,a)}setScaling(e){return I.fromImage({image:this.image,scaling:e})}};function Un(n,t){if(t==="auto"){let{imageAutoSizeLogic:e}=Y();if(e.widthAndHeight==="auto"&&X(n,{width:"auto",height:"auto"}),e.measure){let r=Ye([n]);X(n,{width:r.width,height:r.height})}}else{let{width:e,height:r,align:{x:i,y:o},fitting:s}=t;X(n,{width:e,height:r,x:-e*ue(i),y:-r*ue(o),preserveAspectRatio:s==="stretch"?"none":`x${Ar(i)}Y${Ar(o)} ${s==="fit"?"meet":"slice"}`})}}function Ar(n){let t=ue(n);return t===0?"Min":t===.5?"Mid":t===1?"Max":t}var Ae=class{constructor(t){this.items=t}static create(){return new Ae([])}first(){return this.items.at(0)}last(){return this.items.at(-1)}add(t,e){if(e<0)throw new Error(`Expected non-negative length, got: ${e}`);if(!e)return this;let r=this.last();return new Ae(r?.active===t?[...this.items.slice(0,-1),{active:t,length:r.length+e}]:[...this.items,{active:t,length:e}])}addPattern(t){let e=this;for(let{active:r,length:i}of t.items)e=e.add(r,i);return e}reverse(){return new Ae([...this.items].reverse())}invert(){return new Ae(this.items.map(({active:t,length:e})=>({active:!t,length:e})))}length(){return this.items.reduce((t,{length:e})=>t+e,0)}toString(){return this.items.map(({active:t,length:e})=>t?`[${e}]`:`${e}`).join(" ")}},ye=Ae;K(ye,"EMPTY",Ae.create());var Q=class{constructor(t){this.pattern=t}static create(t){return new Q(t)}static distributed({length:t,tabEveryLen:e,minNumTabs:r=2,numTabs:i=e?Math.ceil(t/e):0,tabToSkipRatio:o=1,tabLength:s,startWithTab:a=!1,endWithTab:l=!1}){i=Math.floor(Math.max(i,r));let c=i+1-Number(a)-Number(l);if(i<0||c<0)throw new Error(`Bad parameters (numTabs=${i}, numSkips=${c})`);let m,u;if(s===void 0){let p=c+i*o;u=t/p,m=u*o}else m=s,u=(t-i*m)/c;let g=Q.EMPTY,f=!0;for(;i--;)f&&a||(g=g.base(u)),f=!1,g=g.tab(m);return l||(g=g.base(u)),g}static tab(t){return Q.EMPTY.tab(t)}static base(t){return Q.EMPTY.base(t)}tab(t){return Q.create(this.pattern.add(!0,t))}base(t){return Q.create(this.pattern.add(!1,t))}addPattern(t){return Q.create(this.pattern.addPattern(t.pattern))}reverse(){return Q.create(this.pattern.reverse())}matchingTabs(){return Q.create(this.pattern.invert())}matchingSlots(){return pe.create(this.pattern)}length(){return this.pattern.length()}toString(){return`TabsPattern[ ${this.pattern} ]`}},C=Q;K(C,"EMPTY",Q.create(ye.EMPTY));var F=class{constructor(t,e,r){this.pattern=t;this.startOpen=e;this.endOpen=r}static create(t,{startOpen:e=t.first()?.active??!0,endOpen:r=t.last()?.active??!0}={}){return new F(t,e,r)}static single(t){return F.closedStart().slot(t).closedEnd()}static slide(t){return F.slot(t).closedEnd()}static slidePair(...t){let e,r;if(t.length==2)[e,r]=t;else{let o=t[0];if(typeof o=="number")e=r=o/2;else{let{length:s,slotLengthsRatio:a=1,slot1LengthFrac:l=a/(a+1)}=o;e=l*s,r=s-e}}let i=ye.EMPTY.add(!0,e).add(!1,r);return[F.create(i),F.create(i.invert())]}static distributed({length:t,slotEveryLen:e,minNumSlots:r,numSlots:i,slotToSkipRatio:o,slotLength:s,startWithSlot:a,endWithSlot:l}){return C.distributed({length:t,tabEveryLen:e,minNumTabs:r,numTabs:i,tabToSkipRatio:o,tabLength:s,startWithTab:a,endWithTab:l}).matchingSlots()}static closedStart(t=!0){return t?F.EMPTY_WITH_CLOSED_START:F.EMPTY}static slot(t){return F.EMPTY.slot(t)}static skip(t){return F.EMPTY.skip(t)}slot(t){return F.create(this.pattern.add(!0,t),{startOpen:this.startOpen})}skip(t){return F.create(this.pattern.add(!1,t),{startOpen:this.startOpen})}addPattern(t){return F.create(this.pattern.addPattern(t.pattern),{startOpen:this.startOpen})}reverse(){return F.create(this.pattern.reverse(),{startOpen:this.endOpen,endOpen:this.startOpen})}closedEnd(t=!0){return F.create(this.pattern,{startOpen:this.startOpen,endOpen:!t})}matchingTabs(){return C.create(this.pattern)}startsWithSlot(){return this.pattern.first()?.active??!1}endsWithSlot(){return this.pattern.last()?.active??!1}startsWithOpenSlot(){return this.startsWithSlot()&&this.startOpen}endsWithOpenSlot(){return this.endsWithSlot()&&this.endOpen}length(){return this.pattern.length()}toString(){return`SlotsPattern[ ${this.pattern} ]`}},pe=F;K(pe,"EMPTY",F.create(ye.EMPTY)),K(pe,"EMPTY_WITH_CLOSED_START",F.create(ye.EMPTY,{startOpen:!1}));var me={};j(me,{ZERO:()=>Pt,millimeters:()=>Yn,oneSideMillimeters:()=>yr,oneSideUnits:()=>wt,units:()=>Xn});var Pt={oneSideInUnits:0};function Yn(n,{millimetersPerUnit:t}){return yr(n/2,{millimetersPerUnit:t})}function yr(n,{millimetersPerUnit:t}){return wt(n/t)}function Xn(n){return wt(n/2)}function wt(n){return{oneSideInUnits:n}}function St(n){let t=n/180*Math.PI;return[Math.sin(t),Math.cos(t)]}var Z=void 0;function Pr(n){return n===Z||typeof n=="string"||typeof n=="number"}var A=class extends xe{constructor(e,r,i){super(e);this.path=e;this.state=r;this.stacks=i}static create(e=[0,0]){return new A($.create(e),{pos:e,angleDeg:0,down:!0},new Map)}get pos(){return this.state.pos}get angleDeg(){return this.state.angleDeg}get isPenDown(){return this.state.down}asPath(){return this.path}asTransform(){return q.rotateRight(this.angleDeg).translate(...this.pos)}append({path:e=this.path,dAngleDeg:r=0,angleDeg:i=this.angleDeg+r,down:o=this.isPenDown,stackKey:s,stack:a,stacks:l=a?new Map(this.stacks).set(s,a):this.stacks}){return new A(e,{...this.state,angleDeg:i,down:o},l)}appendJump({dPos:e,pos:r=e?[this.pos[0]+e[0],this.pos[1]+e[1]]:void 0,dAngleDeg:i=0,angleDeg:o=this.angleDeg+i}){return new A(r?this.path.moveTo(r):this.path,{...this.state,...r?{pos:r}:{},angleDeg:o},this.stacks)}appendDraw({pathIfDown:e,dPos:r=[0,0],pos:i=[this.pos[0]+r[0],this.pos[1]+r[1]],dAngleDeg:o=0,angleDeg:s=this.angleDeg+o}){return this.isPenDown?new A(e,{...this.state,pos:i,angleDeg:s},this.stacks):this.appendJump({pos:i,angleDeg:s})}appendState({pos:e,angleDeg:r,down:i}){let o=this;return e&&(o=o.appendJump({pos:e})),o.append({angleDeg:r,down:i})}pushInternal(e,r){return this.append({stackKey:e,stack:[...this.stacks.get(e)||[],r]})}push(e=Z){return this.pushInternal(e,this.state)}pushPos(e=Z){return this.pushInternal(e,{pos:this.pos})}pushAngle(e=Z){return this.pushInternal(e,{angleDeg:this.angleDeg})}pushPosAndAngle(e=Z){return this.pushInternal(e,{pos:this.pos,angleDeg:this.angleDeg})}pushPen(e=Z){return this.pushInternal(e,{down:this.isPenDown})}getStackSize(e=Z){let r=this.stacks.get(e);return r?r.length:0}getStackKeys(){return[...this.stacks.keys()]}isStackEmpty(e=Z){return this.getStackSize(e)===0}peek(e=Z){let r=this.stacks.get(e);if(!r||!r.length)throw new Error(`Stack ${JSON.stringify(e??"default")} is empty.`);return this.appendState(te(r.at(-1)))}pop(e=Z){return this.peek(e).append({stackKey:e,stack:te(this.stacks.get(e)).slice(0,-1)})}branch(e,...r){return this.andThen(e,...r).appendState(this.state)}branches(...[e,r,...i]){return this.repeat(e,(o,...s)=>o.branch(r,...s),...i)}repeat(...e){function r(o){return typeof o[0]=="number"}let i=this;if(r(e)){let[o,s,...a]=e;for(let l=0;l<o;l++)i=i.andThen(s,...a,l,o)}else{let[o,s,...a]=e,l=0;for(let c of o)i=i.andThen(s,...a,c,l++,o)}return i}copy(e){return this.appendState(e.state)}copyPos(e){return this.appendState({pos:e.pos})}copyAngle(e){return this.appendState({angleDeg:e.angleDeg})}copyPosAndAngle(e){return this.appendState({pos:e.pos,angleDeg:e.angleDeg})}copyPen(e){return this.appendState({down:e.isPenDown})}dropPath(){return this.append({path:$.create(this.pos)})}penDown(e=!0){return this.append({down:e})}penUp(e=!0){return this.penDown(!e)}withPenDown(...e){let[r=!0,i,...o]=typeof e[0]=="boolean"?e:[void 0,...e],s=this.isPenDown;return this.penDown(r).andThen(i,...o).penDown(s)}withPenUp(...e){let[r=!0,i,...o]=typeof e[0]=="boolean"?e:[void 0,...e];return this.withPenDown(!r,i,...o)}forward(e){return this.goToRelative(e,0)}back(e){return this.forward(-e)}strafeRight(e){return this.goToRelative(0,e)}strafeLeft(e){return this.strafeRight(-e)}goToRelative(e,r){let i=this.relPos(e,r);return this.appendDraw({pathIfDown:this.path.relativeLineTo(i),dPos:i})}goTo(e){return this.appendDraw({pathIfDown:this.path.lineTo(e),pos:e})}jumpTo(e){return this.appendJump({pos:e})}setAngle(e){return this.append({angleDeg:e})}lookUp(){return this.setAngle(0)}lookDown(){return this.setAngle(180)}lookRight(){return this.setAngle(90)}lookLeft(){return this.setAngle(270)}lookAt(e){return this.setAngle(Math.atan2(e[0]-this.pos[0],this.pos[1]-e[1])/Math.PI*180)}right(e=90){return this.append({dAngleDeg:e})}left(e=90){return this.right(-e)}turnBack(){return this.right(180)}curveTo(e,r="quad"){let i={pos:e.pos,angleDeg:e.angleDeg};if(!this.isPenDown)return this.appendJump(i);let o=this,{startSpeed:s,targetSpeed:a}=r==="quad"?{startSpeed:"auto",targetSpeed:void 0}:{startSpeed:r.startSpeed??r.speed??"auto",targetSpeed:r.targetSpeed??r.speed??"auto"},l;function c(p){let[d,h]=St(p.angleDeg);return[h,d,-h*p.pos[0]-d*p.pos[1]]}function m(){if(!l){let[p,d,h]=c(o),[y,P,S]=c(e),[O,G,M]=[d*S-P*h,y*h-p*S,p*P-y*d];l=[Math.abs(M)<1e-9?void 0:[O/M,G/M]]}return l[0]}function u(p,d,h=1){return d==="auto"?m()||p.pos:p.forward(d*h).pos}let g=u(this,s),f=a===void 0?this.path.quadratic({point1:g,target:e.pos}):this.path.cubic({point1:g,point2:u(e,a,-1),target:e.pos});return this.appendDraw({pathIfDown:f,...i})}curve(e,r){return this.curveTo(this.andThen(e),r)}curveFromPop(...e){let[r=Z,i]=Pr(e[0])?e:[void 0,...e];return this.pop(r).curveTo(this,i)}curveFromPeek(...e){let[r=Z,i]=Pr(e[0])?e:[void 0,...e];return this.peek(r).curveTo(this,i)}smoothRight(e,r,i){return this.curve(o=>o.forward(r).right(e).forward(r),i)}smoothLeft(e,r){return this.smoothRight(-e,r)}arcRight(e,r){let[i,o]=St(e),s=this.relPos(r*i,r*(1-o));if(Math.abs(e)<360)return this.appendDraw({pathIfDown:this.path.relativeArc({radiusX:r,target:s,largeArc:i<0==e>0,clockwise:e>0}),dPos:s,dAngleDeg:e});let a=this.appendJump({dPos:s,dAngleDeg:e});return this.isPenDown?a.push().arcRight(180,r).arcRight(180,r).pop():a}roundCornerRight(e,r=e){let i=this.relPos(e,r);return this.appendDraw({pathIfDown:this.path.relativeArc({target:i,radiusX:r,radiusY:e,xAxisRotationDeg:this.angleDeg,clockwise:e*r>=0}),dPos:i,dAngleDeg:90})}roundCornerLeft(e,r){return this.roundCornerRight(e,-r).turnBack()}halfEllipseRight(e,r){let i=this.relPos(0,r);return this.appendDraw({pathIfDown:this.path.relativeArc({target:i,radiusX:r/2,radiusY:e,xAxisRotationDeg:this.angleDeg,clockwise:e*r>=0}),dPos:i,dAngleDeg:180})}halfEllipseLeft(e,r){return this.halfEllipseRight(e,-r)}arcLeft(e,r){return this.arcRight(-e,-r)}relPos(e,r){let[i,o]=St(this.angleDeg);return[e*i+r*o,-e*o+r*i]}circle(e){return this.ellipse(e)}ellipse(e,r=e){return this.state.down?this.branch(i=>i.appendJump({dPos:i.relPos(e,0),dAngleDeg:90}).halfEllipseRight(r,2*e).halfEllipseRight(r,2*e)):this}closePath(){return this.asPath().closePath()}toString(){return`Turtle[${JSON.stringify(this.state)}, stack=${JSON.stringify(this.stacks)}, path=${this.path}]`}};function wr({kerf:n,thickness:t,tabsDir:e,outerCornersRadius:r=0,innerCornersRadius:i=0}){return{kerf:n,thickness:t,tabsDir:e,outerCornersRadius:r,innerCornersRadius:i}}function Sr({kerf:n,thickness:t,slotWidthKerf:e=!0,innerCornersRadius:r=0}){return{kerf:n,thickness:t,slotWidthKerf:e===!0?n:e||Pt,innerCornersRadius:r}}function Hn(n){return n instanceof C||n instanceof pe}function Tr(n){function t(s){return a=>n(a,s)}function e(s){return(a,l)=>{let c=Hn(l)?{pattern:l}:l;return n(a,{...c,options:{...s,...c.options}})}}function r(s){return s[0]instanceof A}function i(s){let[a]=s;return Object.hasOwn(a,"pattern")&&Object.hasOwn(a,"options")}function o(...s){return r(s)?n(...s):i(s)?t(...s):e(...s)}return o}function Rr({pattern:n,startActive:t,endActive:e}){let r=t,i=[{kind:"boundary",boundary:"start",active:r}];for(let o of n.items)o.active!==r&&(r=o.active,i.push({kind:"activeEdge",newActive:r,useKerf:i.length>1})),i.push({kind:"forward",active:r,length:o.length});return e!==r&&(r=e,i.push({kind:"activeEdge",newActive:r,useKerf:!1})),i.push({kind:"boundary",boundary:"end",active:r}),i}function vr(n){return n>0?[1,n]:n<0?[-1,-n]:[0,0]}function Ke(n,t,e,r){return e===0?n.right(90*r):t>0?n.arcRight(90*r,e*r):n.left(90*r).arcRight(270*r,e*r).left(90*r)}var $n=(n,{pattern:t,dir:e,onTabLevel:r=!1,startOnTab:i=r,endOnTab:o=r,options:s})=>{let{kerf:a,thickness:l,outerCornersRadius:c,innerCornersRadius:m}=wr(s),u=Rr({pattern:t.pattern,startActive:i,endActive:o});e||=s.tabsDir;let g=e==="right"?1:e==="left"?-1:e;for(let f=0;f+2<u.length;f++){let[p,d,h]=u.slice(f,f+3);if(d.kind==="forward")p.kind==="boundary"&&(n=n.forward(d.length/2)),h.kind==="boundary"&&(n=n.forward(d.length/2));else if(d.kind==="activeEdge"){let y=d.useKerf?a.oneSideInUnits*(d.newActive?-1:1):0,P=(p.kind==="forward"?p.length/2:0)+y,S=(h.kind==="forward"?h.length/2:0)-y;if(P<0||S<0)throw new Error("Kerf too big, negative edge");let O=[-m,c];d.newActive||O.reverse();let G=[p,h],[[M,x],[w,E]]=O.map((U,z)=>vr(G[z].kind==="boundary"?0:U)),ne=g*(d.newActive?1:-1);n=n.forward(P-x).andThen(Ke,M,x,ne).forward(l-x-E).andThen(Ke,w,E,-ne).forward(S-E)}}return n},Wn={center:0,right:1,left:-1},jn=(n,{pattern:t,dir:e="center",startOpen:r=t.startsWithOpenSlot(),endOpen:i=t.endsWithOpenSlot(),options:o})=>{let{kerf:s,thickness:a,slotWidthKerf:l,innerCornersRadius:c}=Sr(o),m=Rr({pattern:t.pattern,startActive:r,endActive:i});return n.branch(u=>{u=u.withPenUp(f=>f.strafeRight(a/2*Wn[e]));let g=Math.max(0,a/2-2*l.oneSideInUnits);for(let f of[1,-1])u=u.branch(p=>{r&&(p=p.withPenUp(h=>h.strafeRight(g*f)));function d(h,y,P){return h.withPenDown(y,S=>S.forward(P))}for(let h=0;h+2<m.length;h++){let[y,P,S]=m.slice(h,h+3);if(P.kind==="forward")y.kind==="boundary"&&(p=p.andThen(d,P.active,P.length/2)),S.kind==="boundary"&&(p=p.andThen(d,P.active,P.length/2));else if(P.kind==="activeEdge"){let O=P.useKerf?s.oneSideInUnits*(P.newActive?1:-1):0,G=(y.kind==="forward"?y.length/2:0)+O,M=(S.kind==="forward"?S.length/2:0)-O;if(G<0||M<0)throw new Error("Kerf too big, negative edge");let[x,w]=vr(-c);P.newActive?p=p.andThen(d,!1,G).right(90*f).forward(g-w).andThen(Ke,x,w,-f).forward(M-w):p=p.forward(G-w).andThen(Ke,x,w,-f).forward(g-w).right(90*f).andThen(d,!1,M)}}return p});return u}).withPenUp(u=>u.forward(m.reduce((g,f)=>f.kind==="forward"?g+f.length:g,0)))},kr=Tr($n),Or=Tr(jn);function Me(n){return{tabs:kr(n),slots:Or(n)}}var k={};j(k,{column:()=>Tt,fitInBoxes:()=>Zn,layout:()=>zn,pack:()=>Qn,repeat:()=>Kn,row:()=>_n});function qn(n){if(typeof n=="number")return{from:0,step:1,count:n};let{from:t=0,to:e,step:r=1}=n;return{from:t,step:r,count:Math.max(Math.floor((e-t)/r+1e-9)+1,0)}}function*Er(n){let t=V(n).map(qn);if(t.some(({count:r})=>!r))return;let e=t.map(()=>0);for(;;){yield e.map((i,o)=>{let{from:s,step:a}=t[o];return s+i*a});let r=e.length-1;for(;r>=0&&e[r]===t[r].count-1;)e[r--]=0;if(r<0)return;e[r]++}}function zn({count:n,pieceFunc:t}){let e=[];for(let r of Er(n)){let i=t(...r);i&&e.push(i)}return b(e)}function Kn({piece:n,rows:t=1,columns:e=1,gap:r=1,gapX:i=r,gapY:o=r}){let{width:s,height:a}=n.getBoundingBox(),l=[];for(let[c,m]of Er([t,e]))l.push(n.translate(m*(s+i),c*(a+o)));return b(l)}function Dr(n){function t(e){if(e.length!==1)return!1;let r=e[0];return!!r&&r.constructor===Object&&Object.hasOwn(r,"pieces")}return t(n)?n[0]:{pieces:V(n)}}function Tt(...n){let{pieces:t,gap:e=1,axis:r="Y"}=Dr(n),i=0,o=[];for(let s of se(t)){let a=s.getBoundingBox();o.push(r==="X"?s.translateX(i-a.minX):s.translateY(i-a.minY)),i+=(r==="X"?a.width:a.height)+e}return b(o)}function _n(...n){return Tt({...Dr(n),axis:"X"})}var Jn="default";function Qn(...n){function t(l){return l.length!==1||l[0]instanceof T||Array.isArray(l[0])}let{outline:e,axis:r="X",normaliseItems:i=Jn,gap:o=1}=t(n)?{outline:n}:n[0];function s(l){return i==="none"?l:l.normalise(i)}function a(l,c){return Tt({pieces:l.map(m=>(m instanceof T?m:a(m,st(c))).andThen(s)),gap:o,axis:c})}return a(e,r)}function Zn({pieces:n,boxes:t,repeatBoxes:e=!1,gap:r=1,margin:i=r}){let o=V(t).map(N),s=e?e===!0?o.length:e==="last"?1:e:0;if(s>o.length)throw new Error(`Should repeat the last ${s} boxes, but only ${o.length} specified.`);let a=s?o.slice(-s):[],l=oe(i),c=0;function m(f){let p=[],d=l.left,h=c,y=0;for(;h<n.length;){let P=n[h],S=P.getBoundingBox();if(d+S.width>f-l.right)break;p.push(P.normalise("default").translateX(d)),d+=S.width+r,S.height>y&&(y=S.height),h++}return p.length?{row:b(p),height:y,accept:()=>{c=h}}:void 0}let u=[],g;do{g=!1;for(let f of o){let p=[],d=l.top;for(;;){let h=m(f.width);if(!h||d+h.height>f.height-l.bottom)break;h.accept(),p.push(h.row.translateY(d)),d+=h.height+r}p.length?(g=!0,u.push(b(p).translate(f.minX,f.minY))):u.push(void 0)}o=a}while(g);return c<n.length?{boxedPieces:u,remainingPieces:n.slice(c)}:{boxedPieces:u}}function ei(n,t,e){if(Array.isArray(t)){if(!Array.isArray(e))throw new Error(`Cannot merge array with non-array for key ${n}`);return[...t,...e]}if(typeof t=="object"){if(typeof e!="object")throw new Error(`Cannot merge object with non-object for key ${n}`);return e==null?t:t==null?e:Lr(t,e)}throw new Error(`Cannot merge values for key ${n}, can only merge objects and arrays`)}function Lr(n,t){let e={...n,...t},r=new Set(Object.keys(n));for(let[i,o]of Object.entries(t))r.has(i)&&(e[i]=ei(i,n[i],o));return e}function de(n){return Object.assign(t=>de(Lr(n,typeof t=="function"?t(n):t)),n)}function _e(n,t){return t===void 0?`${at(n)}`:`${at(n*t,{maxDigits:2})}mm`}function Br({width:n},t){return`__w${_e(n,t).replace(".","_")}`}function Cr(n,t){return t?n+t:n}function Ir(n){return n.replaceAll(/(\p{Lu}+)(?=\p{Lu}\p{Ll})/gu,"$1 ").replaceAll(/(\p{Ll})(\p{Lu})/gu,"$1 $2").split(/(?:\p{Z}|\p{P})+/gu).filter(Boolean).join("_").toLocaleLowerCase()}var ti=["preview","laser"];function Ve({styleAttributes:n={},defaults:t}){let e={};for(let r of ti)e[r]={...t[r],...n[r]};return e}function Rt({id:n,previewColors:t=De}={}){return{preview:{stroke:t.get(n),strokeWidth:1,vectorEffect:"non-scaling-stroke",fill:"none"},laser:{stroke:"black",strokeWidth:0,fill:"none"}}}var ri=Rt();function Mr({id:n,previewColors:t=De}={}){return{preview:{fill:t.get(n),stroke:t.get(n),strokeWidth:0},laser:{fill:"black",stroke:"black",strokeWidth:0}}}var Na=Mr();function ni(n,{id:t="cut",layers:e=t==="cut"?["cut",H]:[t],styleAttributes:r,side:i="front",includeCornersMarker:o=!1,posCorrectionMillimeters:s}){return{type:"cut",id:t,layers:e,styleAttributes:Ve({styleAttributes:r,defaults:Rt({id:t,previewColors:n.previewColors.cut})}),side:i,includeCornersMarker:o,posCorrectionMillimeters:s}}function ii(n,{id:t="print",layers:e=[t],styleAttributes:r,side:i="front",includeCornersMarker:o=!0,posCorrectionMillimeters:s=n.printPosCorrectionMillimeters}){return{type:"print",id:t,layers:e,styleAttributes:Ve({styleAttributes:r,defaults:Mr({id:t,previewColors:n.previewColors.print})}),side:i,includeCornersMarker:o,posCorrectionMillimeters:s}}function Vr(n,t){return t.type==="cut"?ni(n,t):t.type==="print"?ii(n,t):t}var si=Ve({styleAttributes:{preview:{stroke:"red"}},defaults:ri});function oi(n=!0){let{type:t=Y().cornersMarkerType,enable:e=!!t,id:r="corners_marker",styleAttributes:i={}}=n===!0?{}:n===!1?{enable:!1}:n;return{enable:e,type:t||"circles",id:r,styleAttributes:Ve({styleAttributes:i,defaults:Rt({id:r,previewColors:De})})}}function ai(n=!0){let{enable:t=!0,id:e="reversing_frame",styleAttributes:r={}}=n===!0?{}:n===!1?{enable:!1}:n;return{enable:t,id:e,styleAttributes:Ve({styleAttributes:r,defaults:si})}}var li=400;function ci(n={},t){let{pixelsPerInch:e=li,pixelsPerMillimeter:r=e/25.4,pixelsPerUnit:i=r*(t??1)}=n;return{pixelsPerUnit:i}}var ui=["#404","#084","#840"];function pi(){return ie.create({pool:ui,initial:[[void 0,0],["cut",0],["score",1]]})}var mi=["#a00","#0a0","#00a","#aa0","#a0a","#0aa"];function di(){return ie.create({pool:mi,initial:[[void 0,0],["print",0]]})}function fi({cut:n=pi(),print:t=di()}={}){return{cut:n,print:t}}function gi({colorCodes:n=Y().laserRunsOptions?.colorCodes?.(),handles:t=Y().laserRunsOptions?.handles}={}){return{colorCodes:n,handles:t}}var Fr=[0,0];function hi(n=!0){return n===!0?Y().printPosCorrectionMillimeters??Fr:n===!1?Fr:n}var bi="sheet";function Gr({name:n,fileName:t=n?Ir(n):bi,millimetersPerUnit:e,includeSizeInName:r=e!==void 0,cornersMarker:i,reversingFrame:o,resolution:s,previewColors:a,laserRunsOptions:l,printPosCorrectionMillimeters:c}){return{name:n,fileName:t,includeSizeInName:r,millimetersPerUnit:e,cornersMarker:oi(i),reversingFrame:ai(o),resolution:ci(s,e),previewColors:fi(a),laserRunsOptions:gi(l),printPosCorrectionMillimeters:hi(c)}}function vt(n){let t=URL.createObjectURL(new Blob([new XMLSerializer().serializeToString(n)],{type:"image/svg+xml;charset=utf-8"}));return{url:t,cleanUpFunc:()=>{requestAnimationFrame(()=>{URL.revokeObjectURL(t)})}}}function xi({pixelsPerUnit:n,allowTransparency:t=Y().pngAllowTransparency}){return{pixelsPerUnit:n,allowTransparency:t}}async function Ge(n,t){let{pixelsPerUnit:e,allowTransparency:r}=xi(t),{url:i,cleanUpFunc:o}=vt(n),s=n.viewBox.baseVal,a=s.width*e,l=s.height*e,c=document.createElement("canvas");c.width=a,c.height=l;let m=te(c.getContext("2d"));r===!1&&(m.fillStyle="white",m.fillRect(0,0,a,l));let u=new Image;return await new Promise(g=>{u.onload=()=>{if(m.drawImage(u,0,0,c.width,c.height),r==="ifWhite"||r==="iffWhite"){let f=m.getImageData(0,0,a,l),p=f.data;for(let d=0;d<p.length;d+=4){let h=p[d+3];if(h===0)r==="iffWhite"&&(p[d]=255,p[d+1]=255,p[d+2]=255);else if((p[d]&p[d+1]&p[d+2])===255)r==="iffWhite"&&(p[d+3]=0);else if(h!==255){for(let P=0;P<3;P++)p[d+P]=p[d+P]*h/255+255-h;p[d+3]=255}}m.putImageData(f,0,0)}o(),g(c.toDataURL("image/png"))},u.src=i})}function Nr({name:n,url:t,onClickFunc:e}){let r=document.createElement("a");r.style.display="none",r.download=n,r.href=t,r.onclick=e||null,document.body.appendChild(r),r.click(),r.remove()}function kt({name:n,svg:t}){let{url:e,cleanUpFunc:r}=vt(t);Nr({name:n,url:e,onClickFunc:r})}async function Ot({name:n,svg:t,conversionParams:e}){Nr({name:n,url:await Ge(t,e)})}var Pe=class extends re{constructor(e,r,i){super(e,r);this.textDefTool=i}static create(...e){let{path:r,textPathAttributes:i,textAttributes:o,align:s,id:a}=e[0],l={...i},c={...o};s&&([l.startOffset,c.textAnchor]=s==="start"?["0%","start"]:s==="center"?["50%","middle"]:["100%","end"]);let m=r.asDefTool(a).useByHref();return new Pe(m,{...m.asAttributes(),...l},re.create(T.EMPTY,c))}getTextDefTool(){return this.textDefTool}};function W(n,{font:t,size:e=1,fontAttributes:r,textPath:i,attributes:o={}}={}){let s=typeof t=="string"?B.system(t):t,a,l;i?(l=i instanceof Pe?i:Pe.create(i),a=T.createElement({tagName:"textPath",children:[n]}).useDefTool(l)):a=n;let c=T.createElement({tagName:"text",attributes:{fontSize:e,...r&&ze(r),...o},children:[a]});return s&&(c=c.useDefTool(s)),l&&(c=c.useDefTool(l.getTextDefTool())),c}var Ai="solid #00f4 1px";function yi(n,t){t&&(n.style.border=t===!0?Ai:t)}function Pi({label:n,hint:t,save:e}){let r=document.createElement("button");return r.textContent=n||"Save",t&&(r.title=t),r.addEventListener("click",e),r}var wi=[{type:"print"},{type:"cut"}],v=class{constructor(t,e,r,i,o){this.options=t;this.pieces=e;this.viewBox=r;this.runOptions=i;this.emptyRuns=o;this.runHandles=this.createHandles()}runHandles;get name(){return this.options.name}static create({options:t={},pieces:e,margin:r=1,viewBox:i="auto",runs:o}){let s=Gr(t),a=b(se(e)),l=oe(r),c=i==="auto"?a.getBoundingBox(l):_(N(i),r),m=V(o||wi),u=new Map,g=new Set;for(let f of m){let p=Vr(s,f);if(u.has(p.id))throw new Error(`Duplicate run id: ${JSON.stringify(p.id)}`);u.set(p.id,p),a.selectLayers(...p.layers).getElements().length||g.add(p.id)}return new v(s,a,c,u,g)}getRunOptions(t){let e=this.runOptions.get(t);if(!e)throw new Error(`No run with id ${JSON.stringify(t)}`);return e}getRunPiece({runOptions:t,medium:e}){let r=this.pieces.selectLayers(...t.layers);if(e==="laser"){if(t.posCorrectionMillimeters&&this.options.millimetersPerUnit!==void 0){let[i,o]=t.posCorrectionMillimeters;r=r.translate(-i/this.options.millimetersPerUnit,-o/this.options.millimetersPerUnit)}t.side==="back"&&(r=r.flipX(this.viewBox.minX+this.viewBox.width/2)),this.options.cornersMarker.enable&&t.includeCornersMarker&&(r=b(r,this.getCornersMarkerRawPiece()))}return r.asG({id:t.id,...t.styleAttributes[e]})}getCornersMarkerRawPiece(){let{minX:t,minY:e,width:r,height:i}=this.viewBox;return this.options.cornersMarker.type==="circles"?b(He({center:[t+r,e+i],radius:0}),He({center:[t,e],radius:0})):this.options.cornersMarker.type==="lines"?b($e([t,e],[t+1e-9,e]),$e([t+r,e+i],[t+r-1e-9,e+i])):this.options.cornersMarker.type}getCornersMarker(t){let{id:e}=this.options.cornersMarker;return{id:e,group:this.getCornersMarkerRawPiece().asG({id:e,...this.options.cornersMarker.styleAttributes[t]})}}getReversingFrame(t){let{id:e}=this.options.reversingFrame;return{id:e,group:ve(this.viewBox).asG({id:e,...this.options.reversingFrame.styleAttributes[t]})}}getRunIds(){return[...this.runOptions.keys()]}getNonEmptyRunIds(){return this.getRunIds().filter(t=>!this.emptyRuns.has(t))}runsSelectorFromPartial({medium:t,runsSelector:e={}}={}){let r;Array.isArray(e)?r={runs:e}:r=e;let{runs:i="all",cornersMarker:o="auto",reversingFrame:s="auto"}=r,a=this.runsOrAll(i);function l(){if(!t)throw new Error('Specifying medium is required when using "auto"');return t}if(s===!0&&!this.options.reversingFrame.enable)throw new Error("Cannot specify reversingFrame:true when reversing frame is not enabled in sheet options");if(o===!0&&!this.options.cornersMarker.enable)throw new Error("Cannot specify cornersMarker:true when corners marker is not enabled in sheet options");let c=s==="auto"?this.options.reversingFrame.enable&&l()==="laser"&&a.some(u=>this.getRunOptions(u).side==="back"):s,m=o==="auto"?this.options.cornersMarker.enable&&!c&&l()==="laser"&&!a.some(u=>this.getRunOptions(u).includeCornersMarker):o;return{runs:i==="all"?"all":a,cornersMarker:m,reversingFrame:c}}runsOrAll(t){return t==="all"?this.getNonEmptyRunIds():[...new Set(t)]}getRunsTypes({runs:t,reversingFrame:e}){let r={cut:!1,print:!1};for(let i of this.runsOrAll(t))r[this.getRunOptions(i).type]=!0;return e&&(r.cut=!0),r}laserSVGParamsFromPartial({format:t="SVG",printsAsImages:e=!1,runsSelector:r}={}){return{format:t,printsAsImages:e,runsSelector:this.runsSelectorFromPartial({medium:"laser",runsSelector:r})}}async getRawSVG({medium:t,printsAsImages:e=!1,runsSelector:r={}}){let{runs:i,cornersMarker:o,reversingFrame:s}=this.runsSelectorFromPartial({medium:t,runsSelector:r}),a=this.pieces.getDefsElement(),l=[];for(let u of this.runsOrAll(i)){let g=this.getRunOptions(u),f;g.type==="print"&&e?f=(await I.fromURL({url:await Ge(await this.getRawSVG({medium:t,printsAsImages:!1,runsSelector:{runs:[u],cornersMarker:o,reversingFrame:s}}),this.options.resolution),scaling:{width:this.viewBox.width,height:this.viewBox.height}})).translate(this.viewBox.minX,this.viewBox.minY).asG({id:g.id}):f=this.getRunPiece({runOptions:g,medium:t}),l.push({id:u,group:f})}o&&l.push(this.getCornersMarker(t)),s&&l.push(this.getReversingFrame(t));let{laserRunsOptions:c}=this.options;if(t==="laser"){if(c.colorCodes)for(let u of l)u.extraAttributes={fill:c.colorCodes.get(u.id)};if(this.runHandles)for(let u of l)u.sibling=this.runHandles.get(u.id)}let m=l.map(({id:u,group:g,extraAttributes:f,sibling:p})=>f||p?(X(g,{id:void 0}),D({tagName:"g",attributes:{...f,id:u},children:[p,g]})):g);return Ue({viewBox:this.viewBox,millimetersPerUnit:t==="laser"?this.options.millimetersPerUnit:void 0,children:[...a?[a]:[],...m]})}createHandles(){let{handles:t}=this.options.laserRunsOptions;if(!t)return;let e=this.getHandleRuns();if(e.length<2)return;let r=this.viewBox.width/e.length,i=100,o=_(N({width:i,height:15,...t==="above"?{maxY:0}:t==="below"?{minY:0}:t}),-2),s={size:5,font:"monospace"};return new Map(e.map(({runId:a,type:l},c)=>{let m=W(l,s).normalise({target:o,align:{x:"right",y:"center"}},{margin:1}).setAttributes({fill:"white"}),u=W(a,s).normalise({target:_(o,{right:-m.getBoundingBox().width}),align:{y:"center"}},{margin:1}).setAttributes({fill:"white"});return[a,b(ve(o).setAttributes({fill:this.options.laserRunsOptions.colorCodes?void 0:"black"}),u,m).setAttributes({stroke:"none"}).moveRight(c*i).scale(r/i).translate(this.viewBox.minX,this.viewBox.minY).moveDown(t==="below"?this.viewBox.height:0).setAttributes({id:`${a}-handle`}).asG()]}))}getHandleRuns(){let t=[];for(let e of this.getRunsInNaturalOrder()){let r=this.runsSelectorFromPartial({medium:"laser",runsSelector:e});if(r.runs!=="all"){if(r.runs.length)for(let i of r.runs){let o=te(this.runOptions.get(i));t.push({runId:i,type:(o.side==="back"?"-":"")+o.type[0]})}r.reversingFrame&&t.push({runId:this.options.reversingFrame.id,type:"#"})}}return t}async getPreviewSVG({runsSelector:t,saveOnClick:e=!0,border:r=!0,hoverTitle:i=!0}={}){let o=this.runsSelectorFromPartial({medium:"preview",runsSelector:t}),s=await this.getRawSVG({medium:"preview",runsSelector:o});if(yi(s,r),i){let a=D({tagName:"title"});a.textContent=this.getPreviewHoverTitle({runsSelector:o}),s.insertAdjacentElement("afterbegin",a)}return e&&s.addEventListener("click",()=>{this.saveLaserSVG({runsSelector:t})}),s}getPreviewHoverTitle({runsSelector:{runs:t,reversingFrame:e}}){let r=[this.options.fileName];return t!=="all"&&(r.push(" ("),r.push([t.join(", "),e&&"#"].filter(Boolean).join(" ")),r.push(")")),r.push(" (",_e(this.viewBox.width,this.options.millimetersPerUnit),"",_e(this.viewBox.height,this.options.millimetersPerUnit),")"),r.join("")}async getLaserSVG({printsAsImages:t,runsSelector:e}={}){return await this.getRawSVG({medium:"laser",printsAsImages:t,runsSelector:e})}getSVGName({runsSelector:{runs:t,reversingFrame:e},printsAsImages:r}){let i=[this.options.fileName,...t==="all"?[]:[...t,e&&this.options.reversingFrame.id],r&&"p_img"].filter(Boolean).join("__"),o=this.options.includeSizeInName?Br(this.viewBox,this.options.millimetersPerUnit):void 0;return Cr(i,o)}async saveLaserSVG(t={}){let{format:e,printsAsImages:r,runsSelector:i}=this.laserSVGParamsFromPartial(t),o=await this.getLaserSVG({printsAsImages:r,runsSelector:i}),s=this.getSVGName({runsSelector:this.runsSelectorFromPartial({medium:"laser",runsSelector:i}),printsAsImages:r});if(e==="SVG")kt({name:s,svg:o});else if(e==="PNG")await Ot({name:s,svg:o,conversionParams:this.options.resolution});else return e}getFormatLabel(t){return`.${t.toLowerCase()}`}getSaveButtonLabel({format:t,runsSelector:{runs:e,reversingFrame:r}}){let i=[this.options.fileName];return e!=="all"&&(i.push(" ("),i.push([e.join(", "),r&&"#"].filter(Boolean).join(" ")),i.push(")")),t!=="SVG"&&i.push(" ",this.getFormatLabel(t)),i.join("")}getLaserSVGSaveButton({params:t={},label:e,hintLines:r=[]}={}){let{format:i,printsAsImages:o,runsSelector:s}=this.laserSVGParamsFromPartial(t);return Pi({label:e||this.getSaveButtonLabel({format:i,runsSelector:s}),hint:[this.getSVGName({runsSelector:s,printsAsImages:o}),...r].join(`
`),save:()=>{this.saveLaserSVG({format:i,printsAsImages:o,runsSelector:s})}})}getRunsInNaturalOrder(){let t=[...this.runOptions.values()],e=t.some(({side:o})=>o==="back"),r=o=>o.filter(({id:s})=>!this.emptyRuns.has(s)).map(({id:s})=>({runs:[s],reversingFrame:!1}));function i(o){return r(["print","cut"].flatMap(s=>t.filter(({type:a,side:l})=>a===s&&l===o)))}return e?[...i("back"),{runs:[],reversingFrame:!0},...i("front")]:i("front")}getSaveLaserSVGButtons({format:t="SVG",printsFormat:e="both",includePrintsAsImages:r=!0,runsSelectors:i="all"}={}){let o=document.createElement("div");o.textContent="Files for the laser software:";let s=document.createElement("div");o.appendChild(s),s.style.display="flex",s.style.flexWrap="wrap";function a(c){let m=document.createElement("span");m.style.margin="2px";let u=!0;for(let g of V(c))u?u=!1:g.style.marginLeft="-1px",g.style.minHeight="2.2em",m.appendChild(g);s.appendChild(m)}function l(){let c=document.createElement("hr");c.style.margin="2px",s.appendChild(c)}if(i==="all"){let c=this.getRunsInNaturalOrder();i=[{runs:"all"}],c.length>1&&i.push("separator",...c)}for(let c of i)if(c==="separator")l();else{let m=[],u=this.runsSelectorFromPartial({medium:"laser",runsSelector:c}),{cut:g,print:f}=this.getRunsTypes(u),p=f&&!g?e:t,d=p==="both"?"SVG":p,h=[];if(u.runs==="all"?h.push("All the laser runs"):(u.runs.length&&h.push(`Laser runs: ${u.runs.map(y=>JSON.stringify(y)).join(", ")}`),u.reversingFrame&&h.push("Reversing frame")),m.push(this.getLaserSVGSaveButton({params:{format:d,runsSelector:c},hintLines:h})),r&&f&&d==="SVG"&&m.push(this.getLaserSVGSaveButton({params:{format:"SVG",printsAsImages:!0,runsSelector:c},label:"[PNG prints]",hintLines:["Print layers embedded as raster images",...h]})),p==="both"&&m.push(this.getLaserSVGSaveButton({params:{format:"PNG",runsSelector:c},label:this.getFormatLabel("PNG"),hintLines:["Raster image",...h]})),u.runs==="all")for(let y of m)y.style.fontWeight="bold";a(m)}return o}getUnusedLayers(){let t=new Set(this.pieces.getLayers());for(let e of this.runOptions.values())for(let r of e.layers)t.delete(r);return[...t.delete(H)?[H]:[],...[...t].sort()]}getUnusedLayersWarning(){let t=this.getUnusedLayers();if(!t.length)return;function e(o){let s=document.createElement("span");return s.style.fontFamily="monospace",s.textContent=o,s}let r=document.createElement("span");r.style.color="#9202ff",r.textContent="Warning: Some layers are not included in any runs: ";let i=!0;for(let o of t)i?i=!1:r.appendChild(document.createTextNode(", ")),r.appendChild(e(o===void 0?"NO_LAYER":JSON.stringify(o)));return r.appendChild(document.createTextNode(".")),r}toString(){return`Sheet[${this.name}, options = ${JSON.stringify(this.options)}, ${this.pieces}, viewBox = "${ge(this.viewBox)}", runs = ${JSON.stringify(this.runOptions)}]`}};function Si(){let n=de({size:{width:50,height:5},divs:4,margins:.5,dasharray:[2,4,2,6]})(e=>({marginRatio:e.margins/(e.divs+2*e.margins),innerRatio:e.divs/(e.divs+2*e.margins)})),t=b(R.rectangle({...n.size,cornerRadius:.5}),R.rectangle(n.size).useDefTool(yt({stops:[{color:"white"},{color:"black"}],from:[n.marginRatio,void 0],to:[1-n.marginRatio,void 0]}),["fill","stroke"]).setAttributes({strokeWidth:.3}).setLayer("print"),A.create().repeat(n.dasharray,(e,r,i)=>e.penDown(i%2===0).forward(r)).normalise({y:{min:0,max:n.size.height}}).andThen(e=>k.layout({count:n.divs+1,pieceFunc:r=>e.moveRight((n.marginRatio+r/n.divs*n.innerRatio)*n.size.width)})));return v.create({options:{name:"Gradient calibrator",millimetersPerUnit:1},pieces:t})}var Qe={};j(Qe,{getSheet:()=>Ti});function Ti(n){let t=de({min:0,step:.03,max:.3,...n,tabLen:6,tabsSpace:4,textHeight:3,proberCornersRadius:2})(l=>({count:Math.floor((l.max-l.min)/l.step+1e-9)+1,frameCornersRadius:l.thickness+l.textHeight+l.thickness-l.tabsSpace/2})),e={millimetersPerUnit:1},r={font:"monospace",size:t.textHeight},{tabs:i,slots:o}=Me({kerf:me.ZERO,thickness:t.thickness,tabsDir:"left",outerCornersRadius:.5}),s=(()=>{let l=A.create(),c=C.base(t.tabsSpace).tab(t.tabLen).base(t.tabsSpace);function m(u){return u.andThen(i,c)}for(let u=0;u<2;u++)l=l.andThen(m).arcRight(90,t.proberCornersRadius);return l=l.arcRight(45,t.proberCornersRadius).forward(c.length()*(Math.sqrt(2)-1)/2).andThen(m).forward(c.length()*(Math.sqrt(2)-1)/2).arcRight(135,t.proberCornersRadius),b(l.center().translate(-t.thickness/2,-t.thickness/2),["X","Y"].map((u,g)=>W(u,r).normalise({x:"center",y:{max:-c.length()/2}}).rotateLeft(90*g).setLayer("print"))).normalise("default")})(),a=(()=>{let l=C.base(t.tabsSpace/2).tab(t.tabLen).base(t.tabsSpace/2),c=A.create(),m=[];function u(d){d=d.forward(t.tabsSpace/2);for(let h=0;h<t.count;h++){let y=t.min+h*t.step,P={kerf:me.millimeters(2*y,e)};m.push(W(y.toFixed(2),r).normalise({x:{pos:"center",len:t.tabLen},y:{min:t.thickness,len:t.textHeight,align:"center"}}).rotate(d.angleDeg-90).translate(...d.forward((t.tabsSpace+t.tabLen)/2).pos)),d=d.branch(S=>S.withPenUp(O=>O.strafeRight(t.thickness+t.textHeight)).andThen(o,{pattern:l.matchingSlots(),dir:"right",options:P})).andThen(i,{pattern:l.matchingTabs(),startOnTab:!0,endOnTab:!0,options:P})}return d.forward(t.tabsSpace/2)}for(let d=0;d<2;d++)c=c.andThen(u).arcRight(90,t.frameCornersRadius);let g=t.count*t.tabLen+(t.count+1)*t.tabsSpace;c=c.arcRight(45,t.frameCornersRadius).forward(g*(Math.sqrt(2)-1)/2).andThen(u).forward(g*(Math.sqrt(2)-1)/2).arcRight(135,t.frameCornersRadius);let f=g/2-t.tabsSpace/2-1.5*t.textHeight,p=f-Math.sqrt(2)*(g/2-f);return b(b(c,b(m).setLayer("print")).center(),["X","Y"].map((d,h)=>W(d,r).normalise({x:"center",y:{max:-f}}).rotateLeft(90*h).setLayer("print")),R.polygon([-f,-f],[p,-f],[-f,p]),k.pack([[s,s],s]).translate(-f+1,-f+1))})();return v.create({options:{name:"Kerf calibrator",...e},pieces:a})}var Ze={};j(Ze,{getSheet:()=>Ri});function Ri(n={}){let t=de({max:.5,step:.1,...n,subdivs:2,scoresDist:1.5,scoreLength:6,subdivScoreLength:4})(a=>({unitDist:a.scoresDist*a.subdivs/a.step}));function e({stretch:a=1,getLabel:l}){let c=Math.round(t.max/t.step)*t.subdivs;return k.layout({count:{from:-c,to:c},pieceFunc:m=>(m%t.subdivs?R.line([0,t.subdivScoreLength]):b(R.line([0,t.scoreLength]),b(l?.(m*t.step/t.subdivs)).translateY(t.scoreLength))).moveRight(m*a*t.scoresDist)})}function r(a){return a.toFixed(a?1:0)}function i(a=""){return b(e({stretch:(t.max+t.unitDist)/t.unitDist}).flipY().moveDown(t.max).setLayer("cut"),e({getLabel:l=>W(l?r(l):a+r(l),{font:"monospace",size:2,attributes:{stroke:"none",textAnchor:"end",dominantBaseline:"middle"}}).rotateLeft().moveDown(1)}).setAttributes({strokeWidth:1,vectorEffect:"non-scaling-stroke"}).setLayer("print"))}let o=i("dx = "),s=i("dy = ").rotateRight();return v.create({options:{name:"printPosCorrection calibrator",millimetersPerUnit:1,printPosCorrectionMillimeters:!1},pieces:[o.moveUp(t.max*t.unitDist-t.scoreLength+t.max),s.moveLeft(t.max*t.unitDist+t.scoreLength+2)]})}var Et={};j(Et,{getSheet:()=>ki});async function ki(){let n=await(async()=>{let i={coinR:11,outerR:10.5,dentsR:10,numDents:16,dentToSpaceRatio:1.7,dentAngle:130,dentSpeed:3,dentCirclePos:.9,dentCircleR:.5},s=A.create().circle(i.outerR).right(360/i.numDents*(.5/(i.dentToSpaceRatio+1))).withPenUp(a=>a.strafeLeft(i.dentsR)).repeat(i.numDents,a=>a.arcRight(360/i.numDents*(i.dentToSpaceRatio/(i.dentToSpaceRatio+1)),i.dentsR).right(i.dentAngle).curveTo(a.arcRight(360/i.numDents,i.dentsR).left(i.dentAngle),{speed:i.dentSpeed}).right(i.dentAngle)).penUp().arcRight(-360/i.numDents*(.5/(i.dentToSpaceRatio+1)),i.dentsR).strafeRight(i.dentCirclePos).repeat(i.numDents,a=>a.withPenDown(l=>l.circle(i.dentCircleR)).arcRight(360/i.numDents,i.dentsR-i.dentCirclePos)).setAttributes({fillRule:"evenodd"});return b(R.circle({radius:i.coinR}),b(s,W("1",{font:(await B.googleFonts("Sawarabi Mincho")).setFontAttributes({bold:!0}),size:13}).center()).andThen(a=>b(a.setLayer("print"),a.flipX().setLayer("print_back"))))})(),t=await(async()=>{let i={coinR:10,outerR:9.3,dentsR:8.5,numDents:10,dentAngle:50,dentSpeed:3},o=A.create().branch(a=>a.left(360/i.numDents/4).withPenUp(l=>l.strafeLeft(i.dentsR)).repeat(i.numDents,l=>l.right(i.dentAngle).curveTo(l.arcRight(360/i.numDents,i.dentsR).right(i.dentAngle),{speed:i.dentSpeed}).left(i.dentAngle))),s=o.circle(i.outerR+.2);return b(R.circle({radius:i.coinR}),b(s.setAttributes({fillRule:"evenodd"}),W("2",{font:await B.googleFonts("Domine"),size:18}).center().moveDown(.5)).andThen(a=>b(a.setLayer("print"),a.flipX().setLayer("print_back"))),o.setLayer("score"),o.flipX().setLayer("score_back"))})(),e=await(async()=>{let i={coinR:12,outerR:11.5,innerR:10.6,numDents:18},o=A.create().lookLeft().left(360/i.numDents/4).withPenUp(s=>s.strafeLeft(i.innerR)).repeat(i.numDents,s=>s.arcRight(360/i.numDents/2,i.innerR).strafeLeft(i.outerR-i.innerR).arcRight(360/i.numDents/2,i.outerR).strafeRight(i.outerR-i.innerR));return b(R.circle({radius:i.coinR}),b(o.setAttributes({fillRule:"evenodd"}),W("5",{font:(await B.googleFonts("Vidaloka")).setFontAttributes({bold:!0}),size:20}).center().moveDown(1).setAttributes({fill:"white"})).andThen(s=>b(s.setLayer("print"),s.flipX().setLayer("print_back"))))})(),r=[n,t,e];return v.create({options:{name:"Coins",millimetersPerUnit:1},pieces:k.column({pieces:r.map((i,o)=>k.row(...r.slice(o),...r.slice(0,o))),gap:-1}),runs:[{type:"print",id:"print_back",side:"back"},{type:"cut",id:"score_back",side:"back"},{type:"print"},{type:"cut",id:"score"},{type:"cut"}]})}var Dt={};j(Dt,{getSheet:()=>Ei});async function Ei(){let[n,t,e,r]=(await Promise.all([I.fromAsset(Promise.resolve().then(()=>en(Ur()))),I.fromURL("https://upload.wikimedia.org/wikipedia/commons/thumb/6/6a/JavaScript-logo.png/240px-JavaScript-logo.png"),I.fromURL("https://raw.githubusercontent.com/evanw/esbuild/main/images/logo.svg"),I.fromURL("https://upload.wikimedia.org/wikipedia/commons/8/84/Deno.svg")])).map(o=>o.centerAndFitTo1By1()),i=.05;return v.create({options:{name:"Images demo",resolution:{pixelsPerInch:2e3}},pieces:k.pack({outline:[[[n,t],[e,r]]],gap:i}).setLayer("print"),margin:0})}var Lt={};j(Lt,{getSheet:()=>Di});function Di(){let e={x1B:.1,angle1B:7,fwdBase:.25,fwdB:.1,y2B:.05,x2Base:.25,x2B:.05,angle2B:10,speedBase:.35,speedB:.05};function r(s,a=0){return a+(Math.random()-.5)*2*s}function i(s){let a=A.create().lookDown(),l=a.withPenUp(c=>c.strafeRight(r(e.x1B)).right(r(e.angle1B)));for(let c=0;c<s;c++){let m=a.forward(r(e.y2B,.5)).strafeRight((Math.random()<.5?1:-1)*r(e.x2B,e.x2Base)).right(r(e.angle2B));a=a.forward(1);let u=a.strafeRight(r(e.x1B)).right(r(e.angle1B));l=l.forward(r(e.fwdB,e.fwdBase)).curveTo(m,{speed:r(e.speedB,e.speedBase)}).curveTo(u.back(r(e.fwdB,e.fwdBase)),{speed:r(e.speedB,e.speedBase)}).goTo(u.pos)}return l}let o=b(k.layout({count:{from:1,to:15-1},pieceFunc:s=>i(10).moveRight(s)}),k.layout({count:{from:1,to:10-1},pieceFunc:s=>i(15).rotateLeft().moveDown(s)}),R.rectangle({width:15,height:10,cornerRadius:.3}));return v.create({options:{name:"Jigsaw puzzle"},pieces:o,margin:0})}function Yr({min:n,max:t}){let e=b(R.line([n+.2,0],[t-.2,0]),R.line([t-.2,0],[t-.5,.2]),R.line([t-.2,0],[t-.5,-.2]));for(let r=n+1;r<t;r++)r&&(e=e.add(R.line([r,-.1],[r,.1])));return e}function et(n){let{minX:t,width:e,minY:r,height:i}=N(n);if(t>0||t+e<0||r>0||r+i<0)throw new Error(`Expected a ViewBox containing the origin ([0, 0]), got: ${ge({minX:t,width:e,minY:r,height:i})}`);return b(Yr({min:t,max:t+e}),Yr({min:r,max:r+i}).rotateRight())}function tt(n){return b(R.rectangle({...n,cornerRadius:.5}),A.create().forward(1).right().forward(.15).arcRight(180,.2).branch(t=>t.forward(.15)).turnBack().forward(.05).arcRight(180,.3).forward(.2).scale(.5,[0,-.5]).moveRight(.5-.125).moveDown(1))}async function rt(n,t=n.getRunIds().map(e=>({label:e,runIds:[e]}))){let e=document.createElement("div");e.dataset.name=n.name||"",e.style.display="flex",e.style.flexWrap="wrap",e.style.gap="1em 1px";for(let{label:r,runIds:i}of t){let o=document.createElement("div");o.style.flex="1 0 160px",o.style.maxWidth="200px",o.appendChild(await n.getPreviewSVG({runsSelector:i}));let s=document.createElement("div");s.style.font="0.8em monospace",s.style.paddingRight="1em",s.textContent=r,o.appendChild(s),e.appendChild(o)}return e}async function Xr(){let n={centered:!0,side:2},e=[{args:void 0},{args:"default"},{args:"center"},{args:{target:n},target:n},{args:{target:n,align:"center"},target:n},{args:{target:n,align:{y:"bottom"}},target:n},{args:{target:n,fitting:"fill"},target:n},{args:{target:n,fitting:"fill",align:"center"},target:n},{args:{target:n,fitting:"stretch"},target:n},{args:{x:"center",y:"aboveOrigin"}},{args:{x:"leftOfOrigin"}},{args:{y:"center"}},{args:{x:{min:1,max:3}}},{args:{x:{min:1,max:3},y:{min:0,max:1}}},{args:{x:{min:1,max:3,align:"center"},y:{min:0,max:1}}},{args:{x:{min:1,max:3},y:{min:0,max:1},fitting:"stretch"}},{args:{x:{min:-2},y:{max:0}}},{args:{x:{max:1,pos:"center"},y:"belowOrigin"}},{args:{x:{len:2,pos:"center",align:"right"},y:{pos:"default",len:1}}},{args:{x:{len:2,pos:"center"},y:{len:2,pos:"center"},fitting:"fill"}},{args:{x:{hold:"right",scale:.5}}},{args:{x:{min:-1,len:2,align:"right"},y:{hold:"center",len:1}}},{args:{x:{min:-1,len:2},y:{hold:"top"}}},{args:{x:{hold:"right",len:2},y:{hold:"bottom"}}}].map(({args:s,target:a})=>({args:s,target:a,label:s?JSON.stringify(s).replaceAll(/([,:])/g,"$1 ").replaceAll(/"([^\\"()]+)":/g,"$1:"):"(original)"})),r={minX:-3,maxX:6,minY:-3,maxY:4},i=et(r),o=tt({width:3,height:2}).translate(2,1);return await rt(v.create({options:{name:"Normalise explainer"},viewBox:r,margin:.1,pieces:b(i.setLayer("axes"),...e.map(({args:s,target:a,label:l})=>b(s?o.normalise(s):o,a&&R.rectangle(a).setAttributes({stroke:"green"})).setLayer(l))).setAttributes({stroke:"black"}),runs:e.map(({label:s})=>({type:"cut",id:s,layers:["axes",s]}))}))}var Bt={};j(Bt,{getSheet:()=>Bi});function Bi(){let n={millimetersPerUnit:1},t=me.millimeters(.18,n),e={thickness:3,drawerGap:.5,drawerHandleWidth:20,drawerHandleHeight:14},{tabs:r,slots:i}=Me({kerf:t,thickness:e.thickness,tabsDir:"left",outerCornersRadius:.3});class o{constructor(p,d,h){this.innerWidth=p;this.innerHeight=d;this.innerDepth=h;this.outerWidth=p+2*e.thickness,this.outerHeight=d+e.thickness,this.outerDepth=h+2*e.thickness}outerWidth;outerHeight;outerDepth;static create(p){return new o(p.innerWidth,p.innerHeight,p.innerDepth)}}function s({innerWidth:f,innerHeight:p,innerDepth:d}){let h=C.distributed({length:p,tabEveryLen:15}),y=C.distributed({length:f,tabEveryLen:20}),P=C.distributed({length:d,tabEveryLen:20}),[S,O]=A.create().andThen(r,h).right().andThen(x=>[x.forward((f-e.drawerHandleWidth)/2).curve(w=>w.forward(e.drawerHandleWidth/2).strafeRight(e.drawerHandleHeight),{startSpeed:4,targetSpeed:10}).curve(w=>w.forward(e.drawerHandleWidth/2).strafeLeft(e.drawerHandleHeight),{startSpeed:10,targetSpeed:4}).forward((f-e.drawerHandleWidth)/2),x.forward(f)]).map(x=>x.right().andThen(r,h).right().andThen(r,y).center()),G=A.create().andThen(r,h.matchingTabs()).right().forward(d).right().andThen(r,h.matchingTabs()).right().andThen(r,P).center(),M=A.create().repeat(2,x=>x.andThen(r,{pattern:P.matchingTabs(),onTabLevel:!0}).forward(e.thickness).right().forward(e.thickness).andThen(r,{pattern:y.matchingTabs(),onTabLevel:!0}).forward(e.thickness).right().forward(e.thickness)).center();return{front:S,back:O,side:G,bottom:M}}let a=o.create({innerWidth:30,innerHeight:30,innerDepth:50}),l=o.create({innerWidth:-e.thickness+a.outerWidth+e.drawerGap+e.thickness+e.drawerGap+a.outerWidth-e.thickness,innerHeight:40,innerDepth:a.innerDepth}),c=(()=>{let{front:f,back:p,side:d,bottom:h}=s(a);return k.pack([[f,p],d,d,h.rotateRight()])})(),m=(()=>{let{front:f,back:p,side:d,bottom:h}=s(l);return k.pack([h,[f,d],[p,d]])})();function u(f,p){let d=C.distributed({length:p.outerDepth,tabEveryLen:20}),h=C.distributed({length:e.drawerGap+p.outerHeight+e.drawerGap+e.thickness+e.drawerGap+f.outerHeight+e.drawerGap,tabEveryLen:20}),y=C.distributed({length:e.drawerGap+p.outerWidth+e.drawerGap,tabEveryLen:20}),P=d,S=y,O=d,G=C.distributed({length:e.drawerGap+f.outerHeight+e.drawerGap,tabEveryLen:20}),M=A.create().andThen(r,G).right().andThen(r,O).right().forward(G.length()).right().andThen(r,O).center(),x=A.create().andThen(r,P).right().andThen(r,S).right().andThen(r,P).right().forward(S.length()).withPenUp(z=>z.back(S.length()/2)).right().andThen(i,O.matchingSlots()).center(),[w,E]=A.create().andThen(r,d.matchingTabs()).right().andThen(r,y).right().andThen(r,d.matchingTabs()).right().forward(S.length()).andThen(z=>[z.center(),z.withPenUp(ce=>ce.back(S.length()/2)).right().andThen(i,O.matchingSlots()).center()]),ne=A.create().andThen(r,h).right().andThen(r,d).right().forward(h.length()).branch(z=>z.withPenUp(ce=>ce.back(e.drawerGap+p.outerHeight+e.drawerGap)).right().andThen(i,{pattern:P.matchingSlots(),dir:"right"})).right().andThen(r,d).center(),U=A.create().branch(z=>z.withPenUp(ce=>ce.forward(e.drawerGap+p.outerHeight+e.drawerGap).strafeRight(e.thickness)).right().branch(ce=>ce.andThen(i,{pattern:S.matchingSlots(),dir:"left"})).withPenUp(ce=>ce.forward(S.length()/2).left().forward(e.thickness)).andThen(i,G.matchingSlots())).repeat(2,z=>z.andThen(r,{pattern:h.matchingTabs(),onTabLevel:!0}).forward(e.thickness).right().forward(e.thickness).andThen(r,{pattern:y.matchingTabs(),onTabLevel:!0}).forward(e.thickness).right().forward(e.thickness)).center();return{divider:M,shelf:x,top:E,bottom:w,leftSide:ne,back:U}}let g=(()=>{let{divider:f,shelf:p,top:d,bottom:h,leftSide:y,back:P}=u(a,l);return k.pack([[p.rotateRight(),d.rotateRight(),h.rotateRight(),f.rotateRight()],[y,y.flipX(),P]])})();return v.create({options:{name:"Tabs and slots",...n},pieces:k.pack([g,[k.row({pieces:[c.center(),c.rotate(180).center()],gap:-(2*a.outerWidth-a.outerDepth)}),m]])})}var Ct={};j(Ct,{getSheet:()=>Ci});function Ci(){let n="#009dff",e=b(R.circle({radius:1}).setAttributes({fill:n}),k.layout({count:11,pieceFunc:r=>r?R.line([0,-8]).moveUp(5).rotate(r*360/11):void 0}),R.line([0,-14]),A.create([-10,-18]).setAngle(160).forward(4).left(70).forward(22).withPenUp(r=>r.right(40).back(4)).forward(4).right(100).forward(4)).setAttributes({fill:"none",stroke:n,strokeWidth:1.2}).centerAndFitTo1By1({margin:.5}).setBoundingBox(R.rectangle({centered:!0})).setLayer("print");return v.create({options:{name:"TPVector icon",resolution:{pixelsPerUnit:256}},pieces:e,margin:0})}async function Hr(){let n=["","translate(1, 2)","translateX(1)","translateY(-1)","moveLeft(1)","moveDown(2)","scale(1.5)","scale(1.5, 0.5)","scale(2, [1.5, 1])","scaleX(1 / 3)","scaleY(-2, 1)","flipY()","flipX(1.5)","flipXY()","swapXY()","rotateRight(20)","rotateLeft(45, [1.5, 1])","rotateRight([1.5, 1])","skewRightDown(45)","skewTopToLeft(60, 1)","skewLeftDown(10, 3)","matrix([-1.2, 0.8, 0.5, 1.4, 3, -1])"];function t(o){return o?new Function("Tf",`return Tf.${o}`)(q):q}let e={minX:-2,maxX:6,minY:-2,maxY:5},r=et(e),i=tt({width:3,height:2});return await rt(v.create({options:{name:"Transform explainer"},viewBox:e,margin:.1,pieces:b(i.setLayer("orig_object").setAttributes({stroke:"#ccc"}),b(r.setLayer("axes"),...n.map(o=>i.transform(t(o)).setLayer(o))).setAttributes({stroke:"black"})),runs:n.map(o=>({type:"cut",id:o||"(identity)",layers:["axes","orig_object",o]}))}))}var It={};j(It,{getSheet:()=>Fi});function Fi(){return v.create({options:{name:"Turtle demo"},pieces:k.row({pieces:[(()=>{let n=A.create(),t=n.forward(1).right().forward(.5);for(let e=.35;e<=2;e+=.3)n=n.branch(r=>r.curveTo(t,{startSpeed:1.6,targetSpeed:e}));return n})(),(()=>{function n(e,r){return e.right().forward(r/2).halfEllipseRight(r+2,2*r)}let t=A.create().forward(10);for(let e=1;e<=5;e++)t=t.forward(1).branch(n,e);return t})(),(()=>A.create().right(1.75*360/11).repeat(5,e=>e.right(360*4/11).forward(1)).extendBoundingBox({right:-.2}))(),(()=>{let n=A.create();for(let t=1;t<10;t++)n=n.arcLeft(90,t).forward(3).arcLeft(90,t);return n.arcLeft(110,16)})(),A.create().arcRight(160,1).branch(n=>n.right(140).push()).withPenUp(n=>n.arcRight(40,1)).branch(n=>n.left(140).curveFromPeek({speed:.6}).curveFromPop({speed:.8})).arcRight(160,1),(()=>{function n(t,e){return e?t.forward(1<<e).branch(r=>r.right(80).andThen(n,e-1)).branch(r=>r.left(80).andThen(n,e-1)):t}return A.create().andThen(n,6)})(),(()=>{let t=A.create().circle(1).penUp().repeat(13,e=>e.right(27.692307692307693).branch(r=>r.strafeRight(1.08).withPenDown(i=>i.ellipse(.2,.35))));return b(t.setAttributes({fill:"#ddd",fillRule:"evenodd"}).setLayer("print"),t)})(),A.create().right(10).curve(n=>n.forward(1).right(90).forward(.5),{speed:4}).curve(n=>n.forward(2).lookDown().right(10).forward(4)).curve(n=>n.forward(1).left(130).forward(2)).extendBoundingBox({left:-1})].map((n,t)=>n.normalise({target:{side:1,minX:0,maxY:0}}).scale(t<3?1:.6)),gap:.1}),margin:.1})}async function nt(n,t){return await(typeof n=="function"?n(...t):n)}async function $r({sectionDefs:n,parent:t=document.body,section:e=new URLSearchParams(location.search).get("section")||void 0}){let r="/// ",i=document.createElement("div");document.body.appendChild(i),i.style.display="flex",i.style.gap="0.5em",i.style.marginBottom="1em";let o=document.createElement("span");i.appendChild(o),o.textContent="Show:",o.style.alignSelf="center";let s=document.createElement("select");i.appendChild(s),s.title="Select section",s.style.minWidth="15em",s.addEventListener("change",()=>{y(s.value)});let a=document.createElement("button");i.appendChild(a),a.textContent="",a.addEventListener("click",()=>{y(void 0)});let l=document.createElement("a");i.appendChild(l),l.href="#",l.style.alignSelf="center",l.style.color="red",l.addEventListener("click",x=>{x.preventDefault(),y(w=>w.startsWith(r))});let c=document.createElement("div");t.appendChild(c),c.style.display="flex",c.style.gap="4px";let m=document.createElement("div");c.appendChild(m),m.style.flex="0 1 auto",m.style.minWidth="100px";let u=localStorage.getItem("width")||new URLSearchParams(location.search).get("width");m.style.width=u?`${u}px`:"100%";let g=document.createElement("div");c.appendChild(g),g.style.flex="0 0 8px",g.style.backgroundColor="grey",g.style.boxSizing="border-box",g.style.border="2px solid white",g.style.cursor="ew-resize";let f=g.getBoundingClientRect(),p=f.left+f.width/2-m.getBoundingClientRect().width,d=!1;g.addEventListener("mousedown",()=>{d=!0}),document.addEventListener("mouseup",()=>{d=!1}),document.addEventListener("mousemove",x=>{if(d){x.preventDefault();let w=[...h.children].find(U=>U.getBoundingClientRect().top>=0)||h.firstElementChild,E=w?.getBoundingClientRect().top??0,ne=x.clientX-p;m.style.width=`${ne}px`,m.clientWidth>=ne?localStorage.setItem("width",String(ne)):(m.style.width="100%",localStorage.removeItem("width")),w&&window.scrollBy({top:w.getBoundingClientRect().top-E})}});let h=document.createElement("div");m.appendChild(h),h.style.display="flex",h.style.flexDirection="column",h.style.gap="2em";function y(x,{updateURL:w=!0}={}){x||=()=>!0;let E=typeof x=="string"&&!x.startsWith(r)?x:void 0;if(w){let U=new URL(location.href);E?U.searchParams.set("section",E):U.searchParams.delete("section"),history.pushState({section:E},"",U.toString())}s.value=E||"";let ne=typeof x=="function"?x:U=>U===x;for(let U of document.querySelectorAll(".section"))U.style.display=ne(U.id)?"unset":"none"}function P(x){let w=document.createElement("option");w.text=x||"all sections",x||(w.style.fontWeight="bold"),w.value=x||"",s.appendChild(w)}function S(x){let w=document.createElement("div");h.appendChild(w),w.style.display="none",w.classList.add("section"),w.id=x,P(x);let E=document.createElement("div");return w.appendChild(E),E.textContent=x,E.style.fontSize="1.5em",E.style.cursor="pointer",E.addEventListener("click",()=>{y(x)}),w}P(void 0);let O=document.createElement("progress");h.appendChild(O),O.style.width="100%";let G=await Promise.allSettled(n.map(x=>nt(x,[])));O.remove();let M=0;for(let x of G)if(x.status==="fulfilled"){let{name:w,element:E}=x.value;S(w).appendChild(E)}else{M++;let w=document.createElement("pre");w.style.color="red",w.textContent=x.reason?.stack||String(x.reason),S(r+ae("section_error")).appendChild(w)}return M&&(l.textContent=`Failed sections: ${M}`),y(e,{updateURL:!1}),addEventListener("popstate",x=>{y(x.state?.section,{updateURL:!1})}),c}async function Mi(n){let t=document.createElement("div");t.style.display="flex",t.style.flexDirection="column",t.style.gap="0.2em";let e=document.createElement("div");t.appendChild(e);let r=await n.getPreviewSVG();e.appendChild(r);let i=n.getUnusedLayersWarning();return i&&t.appendChild(i),t.appendChild(Vi(r)),t.appendChild(n.getSaveLaserSVGButtons()),t}function Vi(n){let t=document.createElement("div");t.style.display="flex",t.style.gap=".5em",t.style.flexWrap="wrap",t.style.alignItems="center";let e=[],r=document.createTextNode("Show runs:");t.appendChild(r);for(let i of n.querySelectorAll(":scope > g[id]")){let o=te(i.getAttribute("id")),s=document.createElement("span");t.appendChild(s),s.title="Right-click to blink",s.style.whiteSpace="nowrap";let a=document.createElement("input");s.appendChild(a),a.type="checkbox",a.checked=!0;let l=document.createElement("label");s.appendChild(l),l.appendChild(document.createTextNode(o)),l.addEventListener("click",()=>{a.click()}),a.addEventListener("click",()=>{i.style.display=a.checked?"":"none"});for(let c of[l,a])c.addEventListener("contextmenu",m=>{m.preventDefault();for(let u of e)clearTimeout(u);e.length=0;for(let u=0;u<5;u++)e.push(setTimeout(()=>{a.click(),setTimeout(()=>{a.click()},120)},u*240))})}return t}var le=class{constructor(t){this.sections=t}static create(){return new le([])}addSect(t){return new le([...this.sections,t])}add(...t){function e(a){let l=a[0];return!!(l&&typeof l=="object"&&Object.hasOwn(l,"getSheet")&&typeof l.getSheet=="function")}e(t)&&(t=[t[0].getSheet,...t.slice(1)]);function r(a){return typeof a[0]=="string"}let[i,o,...s]=r(t)?t:[void 0,...t];return this.addSect(async()=>{let a=await nt(o,s);return a instanceof v?{name:i||a.name||ae("sheet"),element:await Mi(a)}:{name:a.dataset.name||ae("section"),element:a}})}addAll(t){return new le([...this.sections,...t.sections])}async show({parent:t,section:e}={}){return await $r({sectionDefs:this.sections,parent:t,section:e})}};var Wr=le.create().add(Ct).add(It).add(Et).add(Lt).add(Bt).add(Dt).add(Qe,{thickness:3}).add(Ze).add(Je).add(Hr).add(Xr);(async()=>await le.create().addAll(Wr).show())();})();
